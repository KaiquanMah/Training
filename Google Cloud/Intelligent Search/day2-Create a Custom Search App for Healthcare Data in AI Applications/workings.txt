Task 1. Create a Healthcare API data store and import data

FHIR data store specification - different versions
https://www.hl7.org/fhir/DSTU2/
https://www.hl7.org/fhir/STU3/
https://www.hl7.org/fhir/R4/ - CHOOSE THIS
https://www.hl7.org/fhir/R5/




FHIR, Carin Blue Button
https://cloud.google.com/healthcare-api/docs/how-tos/fhir-profiles?_gl=1*1i07ntg*_ga*NjU2ODY1MDQxLjE3NTgwMTcxOTc.*_ga_WH2QY8WWF5*czE3NjA0MjA1OTMkbzI0JGcxJHQxNzYwNDIwOTIzJGo0NyRsMCRoMA..
https://cloud.google.com/healthcare-api/docs/how-tos/fhir-profiles?_gl=1*mdufc3*_ga*NjU2ODY1MDQxLjE3NTgwMTcxOTc.*_ga_WH2QY8WWF5*czE3NjA0MjA1OTMkbzI0JGcxJHQxNzYwNDIxMDU1JGo2MCRsMCRoMA..#ig-ui
https://www.hl7.org/fhir/us/core/
https://bluebutton.cms.gov/


View the available implementation guide options, but don't select any.
Which Da Vinci option do you see?
YES		Da Vinci Payer Data Exchange
Da Vinci Implementation Standard
Da Vinci Medical Manual Guide
Da Vinci FHIR Endpoint




At the end of the fhir_store row, 
click the Actions menu and select Import.
Toggle open the Advanced Options section under the Location bar and enable the Override Cloud Storage Path checkbox, providing the path below:
gs://spls/gsp457/fhir_devdays_gcp/fhir1/*

>>FHIR import settings:
Bundle (pretty)

>> Import

----
https://cloud.google.com/healthcare-api/docs/reference/rest/v1/projects.locations.datasets.fhirStores/import?_gl=1%2A17up2h6%2A_ga%2ANjU2ODY1MDQxLjE3NTgwMTcxOTc.%2A_ga_WH2QY8WWF5%2AczE3NjA0MjA1OTMkbzI0JGcxJHQxNzYwNDIxMjIyJGoxJGwwJGgw#contentstructure

Bundle
The source file contains one or more lines of newline-delimited JSON (ndjson). Each line is a bundle that contains one or more resources.

Bundle (pretty)
The entire file is one JSON bundle. The JSON can span multiple lines.

Resource
The source file contains one or more lines of newline-delimited JSON (ndjson). Each line is a single resource.

Resource (pretty)
The entire file is one JSON resource. The JSON can span multiple lines.
----



=============================================


Task 2. Create an AI Applications healthcare data store




In the Google Cloud Console, navigate to AI Applications by searching for it in the search bar at the top of the console.

Click Continue and Activate the API. This will create the Discovery Engine Service Account.





Next, navigate to IAM & Admin > IAM.

Select the checkbox to Include Google-provided role grants.

Locate the Cloud Healthcare Service Agent and select the pencil icon in its row to edit its roles.

Add the following roles: BigQuery Data Editor and BigQuery Job User.

Click on Save.









Locate the Discovery Engine Service Account and select the pencil icon in its row to edit its roles.
=> THERE IS NO 'Discovery Engine Service Account'
=> SO i created another FHIR data store (named fhir_store) in AI applications
=> finally that creates 'Discovery engine service agent' in IAM & Admin > IAM


Click + Add another role.

Add the Healthcare FHIR Store Administrator role.

Click on Save.







Navigate back to AI Applications.

From the navigation menu on the left, select Data Stores.

Select Create Data Store.

Find the card for Healthcare API (FHIR) and click Select on it.

Healthcare API (FHIR) data store card

From the dropdown, select your fhir_store data store.

For the schema select Google predefined schema for this data.

Keep the other values set to their defaults, and select Continue.

Name the data store FHIR Data.

Click Create.








=============================================



Task 3. Create a Healthcare Search App



Select the Apps item on the left-hand navigation bar of AI Applications.

Select Create App.

Find the Custom search (Healthcare data) card and select Create.


For an app name, enter: Cymbal Health Search

For a company name, enter: Cymbal Health

Click on Continue.

Select your FHIR Data data store.

Click Create to create the app.














=============================================




Task 4. Query your Healthcare search app
Note: You will need to give your data store and app 5-10 minutes to be created. You can check the status of the data import under the app's Data menu on the Activity tab. When the status reads Import completed, your app should be ready to query.
Click on Preview on left to be able to preview the search features of your app.

For Patient ID, enter abbd3c1b-3048-49f2-95c9-9303b3b73d34 and click Preview.

For Search text enter diabetes and press return.

Note that results from your FHIR data store have been returned.
https://cdn.qwiklabs.com/wTgtTrWfdkRwdCN334GctahT5MoUbaj5KzTFLticQ1k%3D


Click the Integration menu item of the left-hand navigation menu. This page provides you the instructions and links to documentation to integrate this search app into your server or applications.











=============================================







