You need to select a product from the products table using a given product_id.
If the select statement doesn't find any product, you want to raise an error using the RAISERROR statement. You also need to catch possible errors in the execution.


Instructions 1/4
1
Use RAISERROR with a severity of 11, a state of 1, and the given @product_id. This code will execute without errors.

DECLARE @product_id INT = 5;

IF NOT EXISTS (SELECT * FROM products WHERE product_id = @product_id)
	-- Invoke RAISERROR with parameters
	RAISERROR('No product with id %d.', 11, 1, @product_id);
ELSE 
	SELECT * FROM products WHERE product_id = @product_id;



product_id	product_name	            stock	  price
5	          Trek CrossRip+ - 2018	    12	    4499.99










2
Set the value of @product_id to 50.
Click Run Code (not Submit Answer) to see the error.
Set @product_id back to 5.

-- Change the value
DECLARE @product_id INT = 50;

IF NOT EXISTS (SELECT * FROM products WHERE product_id = @product_id)
	RAISERROR('No product with id %d.', 11, 1, @product_id);
ELSE 
	SELECT * FROM products WHERE product_id = @product_id;
  
  
('42000', '[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]No product with id 50. (50000) (SQLExecDirectW)')
  
  








3
Catch the error generated by the RAISERROR statement you coded.
Select the error message using the appropriate function.

--ERROR_MESSAGE() AS message DIDNT WORK
-- sys.messages DIDNT WORK
BEGIN TRY
    DECLARE @product_id INT = 5;
    IF NOT EXISTS (SELECT * FROM products WHERE product_id = @product_id)
        RAISERROR('No product with id %d.', 11, 1, @product_id);
    ELSE 
        SELECT * FROM products WHERE product_id = @product_id;
END TRY

-- Catch the error
BEGIN CATCH
	-- Select the error message
    SELECT * FROM sys.messages; --SELECT ERROR_MESSAGE() AS message;
END CATCH






--SELECT ERROR_MESSAGE(); WORKED
BEGIN TRY
    DECLARE @product_id INT = 5;
    IF NOT EXISTS (SELECT * FROM products WHERE product_id = @product_id)
        RAISERROR('No product with id %d.', 11, 1, @product_id);
    ELSE 
        SELECT * FROM products WHERE product_id = @product_id;
END TRY

-- Catch the error
BEGIN CATCH
	-- Select the error message
    SELECT ERROR_MESSAGE();
END CATCH




product_id	  product_name	              stock	      price
5	            Trek CrossRip+ - 2018	        12	      4499.99











4
Set the value of @product_idto 50.
Click Run Code (not Submit Answer) to see the error.
Set @product_id back to 5.

BEGIN TRY
	-- Change the value
    DECLARE @product_id INT = 50;	
    IF NOT EXISTS (SELECT * FROM products WHERE product_id = @product_id)
        RAISERROR('No product with id %d.', 11, 1, @product_id);
    ELSE 
        SELECT * FROM products WHERE product_id = @product_id;
END TRY
BEGIN CATCH
	SELECT ERROR_MESSAGE();
END CATCH


No product with id 50.
























SELECT * FROM sys.messages;
message_id	language_id	severity	is_event_logged	text
21	1033	20	false	Warning: Fatal error %d occurred at %S_DATE. Note the error and time, and contact your system administrator.
101	1033	15	false	Query not allowed in Waitfor.
102	1033	15	false	Incorrect syntax near '%.*ls'.
103	1033	15	false	The %S_MSG that starts with '%.*ls' is too long. Maximum length is %d.
104	1033	15	false	ORDER BY items must appear in the select list if the statement contains a UNION, INTERSECT or EXCEPT operator.
105	1033	15	false	Unclosed quotation mark after the character string '%.*ls'.
106	1033	16	false	Too many table names in the query. The maximum allowable is %d.
107	1033	15	false	The column prefix '%.*ls' does not match with a table name or alias name used in the query.
108	1033	15	false	The ORDER BY position number %ld is out of range of the number of items in the select list.
109	1033	15	false	There are more columns in the INSERT statement than values specified in the VALUES clause. The number of values in the VALUES clause must match the number of columns specified in the INSERT statement.
110	1033	15	false	There are fewer columns in the INSERT statement than values specified in the VALUES clause. The number of values in the VALUES clause must match the number of columns specified in the INSERT statement.
111	1033	15	false	'%ls' must be the first statement in a query batch.
112	1033	15	false	Variables are not allowed in the %ls statement.
113	1033	15	false	Missing end comment mark '*/'.
114	1033	15	false	Browse mode is invalid for a statement that assigns values to a variable.
115	1033	15	false	The FOR UPDATE clause is invalid for statements containing set operators.
116	1033	15	false	Only one expression can be specified in the select list when the subquery is not introduced with EXISTS.
117	1033	15	false	The %S_MSG name '%.*ls' contains more than the maximum number of prefixes. The maximum is %d.
119	1033	15	false	Must pass parameter number %d and subsequent parameters as '@name = value'. After the form '@name = value' has been used, all subsequent parameters must be passed in the form '@name = value'.
120	1033	15	false	The select list for the INSERT statement contains fewer items than the insert list. The number of SELECT values must match the number of INSERT columns.
121	1033	15	false	The select list for the INSERT statement contains more items than the insert list. The number of SELECT values must match the number of INSERT columns.
122	1033	15	false	The %ls option is allowed only with %ls syntax.
123	1033	15	false	Batch/procedure exceeds maximum length of %d characters.
124	1033	15	false	CREATE PROCEDURE contains no statements.
125	1033	15	false	Case expressions may only be nested to level %d.
126	1033	15	false	Invalid pseudocolumn "%.*ls".
127	1033	15	false	A TOP N or FETCH rowcount value may not be negative.
128	1033	15	false	The name "%.*s" is not permitted in this context. Valid expressions are constants, constant expressions, and (in some contexts) variables. Column names are not permitted.
129	1033	15	false	Fillfactor %d is not a valid percentage; fillfactor must be between 1 and 100.
130	1033	16	false	Cannot perform an aggregate function on an expression containing an aggregate or a subquery.
131	1033	15	false	The size (%d) given to the %S_MSG '%.*ls' exceeds the maximum allowed for any data type (%d).
132	1033	15	false	The label '%.*ls' has already been declared. Label names must be unique within a query batch or stored procedure.
133	1033	15	false	A GOTO statement references the label '%.*ls' but the label has not been declared.
134	1033	15	false	The variable name '%.*ls' has already been declared. Variable names must be unique within a query batch or stored procedure.
135	1033	15	false	Cannot use a BREAK statement outside the scope of a WHILE statement.
136	1033	15	false	Cannot use a CONTINUE statement outside the scope of a WHILE statement.
137	1033	15	false	Must declare the scalar variable "%.*ls".
138	1033	15	false	Correlation clause in a subquery not permitted.
139	1033	15	false	Cannot assign a default value to a local variable.
140	1033	15	false	Can only use IF UPDATE within a CREATE TRIGGER statement.
141	1033	15	false	A SELECT statement that assigns a value to a variable must not be combined with data-retrieval operations.
142	1033	15	false	Incorrect syntax for definition of the '%ls' constraint.
144	1033	15	false	Cannot use an aggregate or a subquery in an expression used for the group by list of a GROUP BY clause.
145	1033	15	false	ORDER BY items must appear in the select list if SELECT DISTINCT is specified.
146	1033	15	false	Could not allocate ancillary table for a subquery. Maximum number of tables in a query (%d) exceeded.
147	1033	15	false	An aggregate may not appear in the WHERE clause unless it is in a subquery contained in a HAVING clause or a select list, and the column being aggregated is an outer reference.
148	1033	15	false	Incorrect time syntax in time string '%.*ls' used with WAITFOR.
149	1033	15	false	Time value '%.*ls' used with WAITFOR is not a valid value. Check date/time syntax.
150	1033	15	false	Time value %d used with MAX_DURATION is not a valid value; MAX_DURATION wait time must be greater or equal to 0 and less or equal to %d.
151	1033	15	false	'%.*ls' is an invalid money value.
152	1033	15	false	The same large data placement option "%.*ls" has been specified twice.
153	1033	15	false	Invalid usage of the option %.*ls in the %ls statement.
154	1033	15	false	%S_MSG is not allowed in %S_MSG.
155	1033	15	false	'%.*ls' is not a recognized %ls option.
156	1033	15	false	Incorrect syntax near the keyword '%.*ls'.
157	1033	15	false	An aggregate may not appear in the set list of an UPDATE statement.
158	1033	15	false	An aggregate may not appear in the OUTPUT clause.
159	1033	15	false	Must specify the table name and index name for the DROP INDEX statement.
160	1033	15	false	Rule does not contain a variable.
161	1033	15	false	Rule contains more than one variable.
162	1033	15	false	Invalid expression in a TOP or OFFSET clause.
164	1033	15	false	Each GROUP BY expression must contain at least one column that is not an outer reference.
165	1033	16	false	Privilege %ls may not be granted or revoked.
166	1033	15	false	'%ls' does not allow specifying the database name as a prefix to the object name.
167	1033	15	false	Cannot create %S_MSG on a temporary object.
168	1033	15	false	The floating point value '%.*ls' is out of the range of computer representation (%d bytes).
169	1033	15	false	A column has been specified more than once in the order by list. Columns in the order by list must be unique.
171	1033	15	false	Browse mode cannot be used with INSERT, SELECT INTO, or UPDATE statements.
172	1033	15	false	Cannot use HOLDLOCK in browse mode.
173	1033	15	false	The definition for column '%.*ls' must include a data type.
174	1033	15	false	The %.*ls function requires %d argument(s).
175	1033	15	false	An aggregate may not appear in a computed column expression or check constraint.
176	1033	15	false	The FOR BROWSE clause is no longer supported in views.
177	1033	15	false	The IDENTITY function can only be used when the SELECT statement has an INTO clause.
178	1033	15	false	A RETURN statement with a return value cannot be used in this context.
179	1033	15	false	Cannot use the OUTPUT option when passing a constant to a stored procedure.
180	1033	15	false	There are too many parameters in this %ls statement. The maximum number is %d.
181	1033	15	false	Cannot use the OUTPUT option in a DECLARE, CREATE AGGREGATE or CREATE FUNCTION statement.
182	1033	15	false	Table and column names must be supplied for the READTEXT or WRITETEXT utility.
183	1033	15	false	The scale (%d) for column '%.*ls' must be within the range %d to %d.
184	1033	16	false	DEFAULT cannot be specified more than once for filegroups of the same content type.
185	1033	15	false	Data stream is invalid for WRITETEXT statement in bulk form.
186	1033	15	false	Data stream missing from WRITETEXT statement.
187	1033	16	false	The valid range for MAX_QUEUE_READERS is 0 to 32767.
188	1033	15	false	Cannot specify a log file in a CREATE DATABASE statement without also specifying at least one data file.
189	1033	15	false	The %ls function requires %d to %d arguments.
190	1033	15	false	An invalid date or time was specified in the statement.
191	1033	15	false	Some part of your SQL statement is nested too deeply. Rewrite the query or break it up into smaller queries.
192	1033	16	false	The scale must be less than or equal to the precision.
193	1033	15	false	The object or column name starting with '%.*ls' is too long. The maximum length is %d characters.
194	1033	15	false	A SELECT INTO statement cannot contain a SELECT statement that assigns values to a variable.
195	1033	15	false	'%.*ls' is not a recognized %S_MSG.
196	1033	15	false	SELECT INTO must be the first query in a statement containing a UNION, INTERSECT or EXCEPT operator.
197	1033	15	false	EXECUTE cannot be used as a source when inserting into a table variable.
198	1033	15	false	Browse mode is invalid for statements containing a UNION, INTERSECT or EXCEPT operator.
199	1033	15	false	An INSERT statement cannot contain a SELECT statement that assigns values to a variable.
201	1033	16	false	Procedure or function '%.*ls' expects parameter '%.*ls', which was not supplied.
202	1033	16	false	Invalid type '%s' for WAITFOR. Supported data types are CHAR/VARCHAR, NCHAR/NVARCHAR, and DATETIME. WAITFOR DELAY supports the INT and SMALLINT data types.
203	1033	16	false	The name '%.*ls' is not a valid identifier.
204	1033	20	true	Normalization error in node %ls.
Showing 100 out of 291654 rows
