The City Council is wondering whether it's worth it to build a Spanish version of the Get It Done application. There is a large Spanish speaking constituency, but they are not sure if they will engage. Building in multi-lingual translation complicates the system and needs to be justified.
They ask Sam to figure out how many people are posting requests in Spanish.
She has already loaded the CSV into the dumping_df variable and subset it to the following columns:
Get It Done requests in many languages
Help Sam quantify the demand for a Spanish version of the Get It Done application. Figure out how many requesters use Spanish and print the final result!


For each row in the DataFrame, detect the dominant language.
Assign the first selected language to the 'lang' column.
Count the total number of posts in Spanish.



dumping_df
    service_request_id  ...                                                                                                                                                                                                                                                                                                                                                                                                                                                                public_description
0   93494               ...  Bales of hay & pallets, old cars, hoarding issue. Fire hazard the picture doesn't do it justice. A junk yard within a neighborhood.                                                                                                                                                                                                                                                                                                                                             
1   101502              ...  Couch, 4 chairs, mattress, carpet padding. this is a on going problem                                                                                                                                                                                                                                                                                                                                                                                                           
2   101520              ...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
3   101576              ...  On the South Side of Paradise Valley Road near the intersection with Jester St. Stuff in trash bags, rolling suitcases, and shopping carts. I suspect possessions of folk camping in the canyon.                                                                                                                                                                                                                                                                                
4   101616              ...  Hay un campamento para personas sin hogar en los acantilados al final de la Avenida Del Mar en Ocean Beach. Mucha basura, estructura similar a la tienda, almohadas, ropa y heces humanas. Vi a un hombre esta ma–ana salir del acantilado excavando el acantilado. Parece que ha estado dando pasos para facilitar su descenso a su campamento. No estaba seguro de c—mo responder a la pregunta de materiales peligrosos. Hay heces humanas visibles, as’ que respond’ que s’.
5   101648              ...  Litter everywhere where homeless camps.  Balboa park. Trail going down to pedestrian bridge across 163 and Marston house                                                                                                                                                                                                                                                                                                                                                        
6   101727              ...  Hay basura por todas partes a lo largo de la carretera. Parece que tambiŽn hay un campamento ilegal de personas sin hogar en la zona.                                                                                                                                                                                                                                                                                                                                           
7   101841              ...  Homeless camp active within state highway fencing nb163 behind Ralphs.  Trash, tents, garbage strewn down the hill, drug dealing prostitution etc.                                                                                                                                                                                                                                                                                                                              
8   101846              ...  Hay una basura a lo largo del borde del ca–—n. Cada vez m‡s basura aparecen todos los d’as.                                                                                                                                                                                                                                                                                                                                                                                     
9   101879              ...  There is a freezer, lawn mowers. bed frame, vacuum cleaners, dressers and entertainment centers in the front yard looks like a junk yard. tenent has put salvation army signs on the junk. the salvation army truck came and wouldn't take  the items.                                                                                                                                                                                                                          
10  101918              ...  Neum‡tico y otros art’culos en la ladera del ca–—n al norte de Marlton.                                                                                                                                                                                                                                                                                                                                                                                                         
11  102017              ...  Homeless Camp at 37th Street Paper street at Myrtle Avenue (3693 Myrtle Ave. overlooking 15 freeway, immediately adjacent to homes.                                                                                                                                                                                                                                                                                                                                             
12  102023              ...  On Old Sea World Drive & Friars to South Shores Parkway (and possibly beyond to the Jetty) there are several spots where illegal dumping has occurred.                                                                                                                                                                                                                                                                                                                          
13  102056              ...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
14  102089              ...  Test                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
15  102176              ...  The city easement is littered with trash between Villa Europa HOA and Axiom (Trieste) apartments.  Please have a crew clean the area.                                                                                                                                                                                                                                                                                                                                           
16  102196              ...  Two encampments, one in the park (red umbrella), the other down the embankment (east) toward the 163.   I think this is "Cypress Grove" area.                                                                                                                                                                                                                                                                                                                                   
17  102198              ...  Enorme cantidad de escombros / basura / vertimiento a lo largo de la valla de eslabones de cadena Marston en el lado del Parque Balboa en el extremo este, cerca del sendero que conduce al ca–—n. La valla tambiŽn est‡ cortada.                                                                                                                                                                                                                                               
18  102199              ...  El ‡rea no est‡ en el mapa. Donde est‡ el pin, ir al norte a lo largo de la carretera tan lejos al norte como usted puede ir (parece ser el sendero nupcial) (la parte m‡s norte del Balboa Park/Marston Property hay algunos ‡rboles ca’dos y un enorme desastre y 2 campamentos. La valla del eslab—n norte est‡ cortada.                                                                                                                                                     
19  102242              ...  Illegal campsites,litter trash drug dealing                                                                                                                                                                                                                                                                                                                                                                                                                                     
20  102282              ...  Beginning or end of rose creek path there is a ton of trash down here. Not to mention the homeless people doing drugs on the path under the bridge. This is a beautiful path that should be cleaned up.                                                                                                                                                                                                                                                                         
21  102382              ...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
22  102403              ...  Remove tree debris from fwy slope                                                                                                                                                                                                                                                                                                                                                                                                                                               
23  102457              ...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
24  102462              ...  Large amount of trash,  etc                                                                                                                                                                                                                                                                                                                                                                                                                                                     
25  102464              ...  Trash active camp illegal activity                                                                                                                                                                                                                                                                                                                                                                                                                                              
26  102465              ...  Active camp tents. Behind Ralphs on state highway property                                                                                                                                                                                                                                                                                                                                                                                                                      
27  102541              ...  Los residentes de 2604 46th St (en la comunidad de City Heights) descarten ilegalmente una gran cantidad de basura en la acera pœblica y el ca–—n. Revise las im‡genes para referencia. Gracias por su atenci—n con este asunto serio y la mejora de la comunidad.                                                                                                                                                                                                              
28  102634              ...  I suspect you receive constant reports of trash piling up at this location, as there are constantly piles of trash just a few steps from the street (and on down into the canyon).                                                                                                                                                                                                                                                                                              
29  102638              ...  Objetos personales abandonados                                                                                                                                                                                                                                                                                                                                                                                                                                                  
30  102661              ...  Tents setup in famous slough, north of w pt Loma blvd. 100 yards up path, 2 tents all week                                                                                                                                                                                                                                                                                                                                                                                      
31  102760              ...  Jeremy Henwood City Heights Park encampments                                                                                                                                                                                                                                                                                                                                                                                                                                    
32  102761              ...  Jeremy Henwood City Heights Park EncampmentPersonal belongings, overnight camping.                                                                                                                                                                                                                                                                                                                                                                                              
33  102775              ...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
34  102851              ...  Litter grocery carts chairs. Clothing homeless.   You should clean up the homeless camps in this area                                                                                                                                                                                                                                                                                                                                                                           
35  102853              ...  Abandoned mattresses homeless                                                                                                                                                                                                                                                                                                                                                                                                                                                   
36  102854              ...  Homeless active camp litter erx                                                                                                                                                                                                                                                                                                                                                                                                                                                 
[37 rows x 3 columns]



resp
{'Languages': [{'LanguageCode': 'en', 'Score': 0.9935020208358765}],
 'ResponseMetadata': {'HTTPHeaders': {'content-length': '64',
   'content-type': 'application/x-amz-json-1.1',
   'date': 'Tue, 18 Jun 2019 22:26:02 GMT',
   'x-amzn-requestid': '0dd39064-9218-11e9-954e-ed8a7be44183'},
  'HTTPStatusCode': 200,
  'RequestId': '0dd39064-9218-11e9-954e-ed8a7be44183',
  'RetryAttempts': 0}}
  
  



# For each dataframe row
for index, row in dumping_df.iterrows():
    # Get the public description field
    description =dumping_df.loc[index, 'public_description']
    if description != '':
        # Detect language in the field content
        resp = comprehend.detect_dominant_language(Text=description)
        # Assign the top choice language to the lang column.
        dumping_df.loc[index, 'lang'] = resp['Languages'][0]['LanguageCode']
        
# Count the total number of spanish posts
spanish_post_ct = len(dumping_df[dumping_df.lang == 'es'])
# Print the result
print("{} posts in Spanish".format(spanish_post_ct))



<script.py> output:
    9 posts in Spanish


Felicidades! You helped Sam count the number of Spanish requests, pushing the City to a data driven decision!

