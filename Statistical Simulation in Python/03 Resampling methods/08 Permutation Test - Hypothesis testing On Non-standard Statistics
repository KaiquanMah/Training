Hypothesis testing - Non-standard statistics
In the previous two exercises, we ran a permutation test for the difference in mean values. Now let's look at non-standard statistics.

Suppose that you're interested in understanding the distribution of the donations received from websites A and B. For this, you want to see if there's a statistically significant difference in the median and the 80th percentile of the donations. Permutation testing gives you a wonderfully flexible framework for attacking such problems.

Let's go through running a test to see if there's a difference in the median and the 80th percentile of the distribution of donations. As before, you're given the donations from the websites A and B in the variables donations_A and donations_B respectively.



The seed for this exercise is set to 123

In [1]: permuted_A_datasets
Out[1]: 
array([[ 5.18944537,  2.33733572,  3.98047533, ...,  0.24878398,
         3.32898159, 13.44776735],
       [ 2.37704603, 13.43142068,  7.0530478 , ...,  2.07601611,
         6.03860325,  5.5438228 ],
       [ 6.31780261, 15.41124275,  4.85542938, ...,  0.03879923,
         6.60492872,  0.73719978],
       ...,
       [12.3756913 ,  4.14672025,  2.50975773, ...,  5.51419711,
         0.53235888, 17.54924049],
       [ 0.07475901,  4.65271737,  6.59091568, ...,  5.69434848,
         0.55393883,  2.93130586],
       [ 5.00331722,  4.57995   , 19.21583394, ...,  4.1837879 ,
         2.63954619,  3.32898159]])

In [2]: permuted_B_datasets
Out[2]: 
array([[2.79121217e+00, 4.98562121e+00, 3.22202744e+00, ...,
        2.34027311e+00, 1.23901335e+01, 3.35534157e+00],
       [9.02422786e+00, 2.34013992e+00, 1.51655745e+01, ...,
        2.25837113e+00, 2.31468022e+01, 3.07002667e+00],
       [9.21972681e-01, 3.45263524e+00, 7.05304780e+00, ...,
        2.31468022e+01, 5.88831298e+00, 4.26321190e+00],
       ...,
       [1.34477674e+01, 1.12580302e+00, 6.00543509e-04, ...,
        8.75875771e+00, 1.43165231e+01, 2.54264298e+01],
       [3.86808084e+00, 1.91992769e+00, 2.52459352e+00, ...,
        1.61605062e+01, 1.54370448e+00, 1.56072383e+00],
       [3.05135995e+00, 5.85514960e+00, 1.34936676e+00, ...,
        3.21507841e+00, 6.63951203e+00, 5.87070109e+00]])

In [4]: permuted_A_datasets.shape
Out[4]: (1000, 500)

In [5]: permuted_B_datasets.shape
Out[5]: (1000, 700)





#Set samples_percentile and samples_median equal to the difference in the 80th percentile and medians of permuted_A_datasets and permuted_B_datasets, respectively.
# Calculate the difference in 80th percentile and median for each of the permuted datasets (A and B)
samples_percentile = np.percentile(permuted_A_datasets, 80, axis=1)-np.percentile(permuted_B_datasets, 80, axis=1)
samples_median = np.median(permuted_A_datasets, axis=1)-np.median(permuted_B_datasets, axis=1)


























In [11]: samples_percentile
Out[11]: 
array([ 0.57367263, -0.53527517,  0.30151233,  0.91011149,  0.52215529,
        0.10655316,  0.13830829, -0.36892919,  0.25774048, -0.71613165,
       -0.03931278,  0.52993736, -0.66471044,  1.35230071, -0.44715585,
        0.4528399 , -0.1922757 ,  0.03931278, -0.70464034,  0.85924475,
       -0.53338391,  1.21474852,  0.292155  ,  0.76741558, -0.12499363,
       -0.14990223,  0.10017551, -0.13830829,  1.1723281 , -0.2285998 ,
       -0.16936457,  0.617702  , -1.52941008,  0.27672231, -1.40971076,
        0.60834424, -0.85074999, -0.50714775,  0.60632029,  0.47533084,
       -0.90332684,  0.30976817,  0.78711616,  0.06545944,  0.99012399,
        0.51912038,  0.45350708,  1.21882053, -0.02121484, -1.11359832,
        0.47199511,  0.93046773, -0.07549688,  1.69042721,  1.26123005,
        0.79935439,  1.68011853,  0.82598931,  0.46812134,  0.51937274,
        0.64433115,  0.90853346, -1.75052823,  0.26315388, -0.44732847,
        0.70979949, -0.43911572, -1.46875832, -0.2640853 , -0.51421797,
       -1.03199972, -0.765006  , -0.14009981,  1.05161151, -1.47426438,
        0.39973444, -0.61291114, -0.56603668,  1.3155316 ,  0.91775437,
        0.25668189, -0.6052417 ,  0.16740743, -0.91150057, -0.5890829 ,
       -0.48565357, -0.92403519,  0.31616536, -0.46212071,  1.22513986,
        0.35598911, -1.4979215 ,  0.03867108, -0.3181484 ,  0.26978093,
        0.52074949, -0.23233946,  0.79850871, -1.45099876, -0.0336239 ,
       -1.70349858,  0.8915579 , -0.58909685,  1.36403124, -0.42323648,
       -1.78953544,  0.49986718,  0.57679138,  1.3470864 ,  0.63996273,
       -0.61531907,  0.82775871,  0.31385504,  1.04174685,  0.41489551,
       -1.19277277,  0.26571855, -0.22828362,  0.81895384,  0.02121484,
        1.10254884,  1.16435935,  0.9926302 , -0.44965502, -0.57467062,
        1.73002911, -0.25522189,  1.08279046, -0.4051185 , -1.09470155,
       -0.15097456,  0.51165108, -2.29135267,  0.65646433,  0.51575739,
        0.54828271,  0.69319878,  0.52087011, -0.5142458 , -0.04498987,
        0.47670284,  0.50714775,  0.23351226,  0.01189233, -0.38315508,
       -0.78156735,  0.56553025,  0.68690472,  0.61438544, -0.25886371,
       -0.74575263,  1.12489919,  0.24625621,  0.58872199,  0.35598911,
       -0.42897977,  0.34646838,  0.64104057, -1.6988236 ,  0.10187151,
       -0.25533699, -0.63950581,  0.49007928, -0.51841847, -0.32515734,
        0.0968822 ,  0.02270501,  0.65038865, -0.76309061, -0.76254827,
       -0.81630316, -0.92534524,  0.76895573, -0.39203836, -0.47842166,
        1.36722654,  1.08030522,  0.35221817,  0.402505  , -0.35548614,
        0.30848905, -0.49005089, -1.06271359,  0.24338049,  0.13883905,
       -1.09606625,  0.50209072,  0.67047319, -0.59777362, -0.44179804,
       -0.12133385, -0.3609604 ,  1.92770268, -1.7781171 , -0.61383677,
        0.52074949, -0.73044681,  0.3424951 , -0.70146361, -0.10187151,
       -1.02719471,  0.23772031, -0.73918425,  0.56463822, -1.13395879,
        0.62108833, -0.36256431, -0.13879366, -1.75835454,  0.84453939,
        0.75255667,  0.45131738, -1.07283703, -0.62744362,  0.87459245,
       -0.38049483,  0.56185044, -0.25274575, -0.30227491, -0.51717789,
       -0.0273051 , -0.7886591 , -0.92012831,  1.0069573 , -0.72745025,
       -0.47495755, -0.51623888,  1.60975152, -0.47740013, -0.78596274,
        0.36318704,  1.10158286,  0.4467644 , -0.37331591, -0.64802758,
        0.01638622,  0.88511613,  0.40329195, -0.07549688,  0.01217817,
        0.13977432, -1.27623147, -0.22579913,  0.07177824, -0.12635878,
       -0.84253719,  0.23509196,  0.51070845, -0.91360212,  0.70274908,
       -1.79400487, -1.27265578, -0.50136949, -0.76540866,  0.50074644,
        0.12946429, -0.25800309,  0.44655201, -0.66210667,  0.4467644 ,
       -1.08425695, -0.59126802, -0.80567029, -0.25800309,  0.39610778,
       -0.03867108,  0.62108833,  0.35604401,  0.23837458, -0.46951438,
       -1.23310106, -0.40545505,  1.41845817, -0.43436175,  0.70901238,
        1.32959121, -0.38029866,  2.00362035, -0.55855789,  0.43590686,
        1.20008538,  1.91809596, -0.15650686, -0.06351422, -0.75148654,
       -0.48015768,  0.34185826,  0.50733909,  0.28557792,  0.54959561,
       -0.78688322, -0.12946429,  0.09027757, -0.45664536,  0.0273051 ,
        0.60973022,  0.1132053 , -0.46004682,  0.04563158,  0.60318975,
       -0.06545944,  0.60694662, -0.05699755,  0.05026502, -0.25747491,
        0.60973022, -0.32094929,  0.06545944, -0.75868304, -0.46924299,
        0.08259093,  0.23351226, -0.28468013, -0.77831742,  0.83945708,
        0.45547204,  1.06166637, -0.39084987,  0.10175653,  0.91319518,
        0.06490616, -0.16491794,  0.61588142, -0.14990223,  0.90929352,
        1.13478749,  0.38618618,  1.06200332, -0.30813443, -0.42843495,
        0.20719118, -0.62269197,  1.85297759, -1.95855082, -0.83583064,
       -0.43925139, -0.51623888, -0.10655316, -0.43780775,  0.73259423,
        0.32321128, -0.79481632, -0.34805783, -1.27820024,  0.07488019,
        0.33448912, -0.53245028, -0.28369639, -0.4935485 ,  0.58155166,
        0.33077585,  0.30151233,  0.85465732,  0.47674908, -0.95367151,
        0.26364632,  1.92185409,  1.75317957, -0.64158533, -1.34062869,
        0.37903651,  0.7141251 , -0.32869345, -0.52194844,  0.59376648,
        0.07549688,  0.45984195,  1.06200332,  0.60080666, -0.25774048,
       -1.05049207, -1.62462197, -0.36024444, -0.10810135,  0.4202894 ,
        0.96445366, -0.41970252, -0.92459603, -1.09451138,  0.1922757 ,
       -0.70184935, -0.08709082, -0.41750938, -0.4207    , -0.54550018,
        0.58029786, -0.53930175,  0.05067875, -0.61929393, -0.77166045,
       -0.46342479,  0.82516521, -0.50150033,  1.47965436,  0.22213419,
        0.96854504, -0.28557792,  0.89605575,  1.82797836,  1.58753965,
        1.23086124, -0.42323648,  0.32869345,  0.50166113, -1.13862025,
        0.1759692 , -0.32515734,  0.1922757 , -0.06287251,  0.86640445,
        0.50422992, -0.80246911, -0.62233583, -1.1106191 ,  0.05026502,
        0.37172263,  0.39974273,  0.3121544 , -0.66114037, -0.3298127 ,
        1.25803127,  0.06069811,  0.90261061,  0.62840992, -0.2640853 ,
       -0.16444809, -1.74729585,  0.26571855, -0.38773495, -0.96265286,
       -0.8432919 ,  0.42964487, -0.69394388, -0.14990223, -0.05150654,
        0.47740013, -0.32512247, -0.4051185 ,  0.0273051 ,  0.34855282,
        0.49892551,  1.3241986 , -1.06150715,  0.15650686, -0.86667524,
        0.4886567 , -0.47741853,  1.15883187,  0.50637278,  0.82794414,
       -1.2226925 , -0.44810561,  0.28307186, -0.57047012, -0.23906314,
        0.42012415,  0.44001475,  0.15650686, -0.97979047, -0.4207    ,
       -0.49324449,  0.50503484,  0.32515734,  0.01189233, -1.33595125,
        0.78854344,  0.20403568,  1.35664088,  0.39430456,  0.44877211,
       -0.68329985,  0.44870489, -0.37482846,  0.51600372,  0.5492347 ,
       -0.17583838,  0.3047831 ,  0.3170193 , -0.85625498, -0.43882976,
       -0.48565357,  0.34646838,  0.1922757 , -0.56553025, -0.06814766,
       -0.36369284,  1.20875344, -0.05067875, -0.75676233,  0.77079267,
        0.70823802,  0.26221114, -0.0336239 , -0.37172263, -0.33687789,
       -0.38179025,  0.09493603,  0.11498071,  0.67654717,  0.4311222 ,
       -0.14029077, -0.37953719,  0.63789032, -1.26775513, -0.92797162,
       -0.66333731,  0.17082441,  0.20876484,  0.86456065,  0.57457758,
        0.16071491,  1.67423707, -0.05753795,  0.03931278, -0.30027462,
        0.7713161 , -0.54755759,  0.87637734, -0.58213829,  0.64842658,
       -0.43911572, -1.65317587, -0.71630528,  0.66114037, -0.48734248,
        0.01489604, -0.57944117,  0.03931278, -0.05753795, -0.43227732,
        0.2981859 ,  0.77000908, -2.12784373,  0.34185826,  0.14990223,
       -0.96779004,  0.42091061, -0.65800727, -0.41750938,  0.85561152,
       -0.79232148,  1.12101707, -0.7347564 , -0.64920853,  0.86781516,
        0.12133385, -0.27068994,  0.48191671,  0.37958243,  0.52087011,
        1.00022112, -0.80567029,  1.64339832, -0.81113444, -0.47740013,
        1.11866157,  0.58288793,  0.69041911, -0.49928506,  0.86933121,
        0.76540866, -0.26360952, -0.92834325,  0.19888033, -0.44732847,
       -1.23660266,  0.99017284, -0.57116362,  0.31633917, -0.19963381,
        0.29371524, -0.08709082,  0.34604676,  0.05753795,  0.5807752 ,
        1.69937791, -0.03867108,  0.89426714,  0.56242442,  0.37310864,
        1.19377433, -0.1922757 ,  0.12828309, -0.27489799,  0.49767802,
        0.87916948, -0.39224114,  0.61776555, -0.06287251, -1.10276874,
       -0.43989218, -0.65147165,  0.06620323, -0.35598911, -0.92898351,
       -0.63581264, -0.52092453,  0.21508364,  0.2012739 , -0.25104363,
       -0.67654717, -0.50869827, -0.32631096,  0.43227732, -0.44732847,
        1.1661669 , -1.43047149, -0.26365681,  0.71801226, -0.88037434,
       -0.44001826,  0.46018079, -0.16936457, -0.74639315,  0.86562462,
       -0.28680109, -0.95367151, -0.34612241,  0.00557353,  0.79088192,
       -0.46691908,  0.79703778,  0.76287999, -0.94181278, -1.36771372,
       -0.47199511, -0.86292282, -0.26182653,  1.26123005, -0.18780504,
        0.41970252, -0.12946429, -1.19377433,  0.06227269, -0.59283142,
        0.667063  ,  2.21737242,  0.83899547,  0.58880527, -1.09593006,
        0.73052563, -0.05409347,  0.99488924, -0.65613296,  0.19913883,
        0.27872308,  0.87152754, -0.24614111, -0.48752222, -0.4729383 ,
        0.13056683,  1.01123276, -0.42531442,  0.40514644,  0.67654717,
        0.40514644,  1.0201889 , -0.48032428,  0.20403568,  1.30454314,
        0.86451704,  0.63596638,  0.08015533,  0.93303559, -0.43422804,
       -1.31638604,  0.77363271, -0.78483561,  0.29301421,  1.37800672,
       -0.71784822, -0.47467888,  0.51546243,  0.3063628 , -0.94671263,
        0.90654885, -0.14005566,  0.82067799,  0.50308913,  0.07549688,
       -0.23509196,  1.16561934, -0.66333731, -0.42240203,  0.52746115,
       -0.702493  , -1.21933629, -0.43436175,  0.01189233, -0.95233398,
        0.42756233,  0.45871495, -0.36043929, -0.44655201, -0.7141251 ,
        0.91797969,  0.05409347,  0.97410353,  0.05026502,  0.37142213,
       -0.91349402, -0.05026502,  0.37143525, -0.08709082, -0.58125162,
       -0.53405838, -1.0676805 ,  0.09332066, -0.83418468,  0.09969832,
       -0.50714775, -0.16491794,  0.89232807, -0.62767259, -1.39336462,
       -0.23758264,  0.10109025,  1.34586069,  0.23509196, -0.80981489,
       -1.25193563,  0.16778487,  0.7416226 , -0.44996061,  1.87454401,
       -1.51402597, -1.46407258,  0.66806784, -1.07254335,  0.12671162,
        0.44732847,  1.07738185,  0.05067875,  0.74994968, -0.47674908,
        0.00288836, -0.57563268,  0.73929814, -0.30027462, -0.46915347,
       -0.40234921, -0.44001826,  0.89426714,  0.43989218,  0.45412134,
        1.83816491,  0.59545819, -0.8807072 , -0.32234473,  0.05699755,
       -0.64002024,  0.35157588,  1.03323851,  1.11956208, -0.51038477,
        0.39324638, -0.40448842, -0.3877652 , -0.51058446,  1.43930573,
        0.03867108,  0.03867108,  0.44899597,  0.37143525, -0.64013687,
       -0.07206408, -0.44001826,  0.03867108,  0.46198115, -0.06972735,
       -0.75428389,  0.30021214, -0.1922757 ,  0.29860753,  0.14990223,
        0.61016081,  1.53248158,  0.5663976 , -0.24988486,  1.70284731,
       -0.18430875, -1.17054923, -0.12946429,  0.56488384, -0.89117178,
       -1.37115298, -0.30151233,  0.56264968,  0.66844496,  0.68631755,
       -0.65800727,  0.6280376 ,  0.36600202, -0.44471572, -0.66609387,
        1.0714509 ,  1.13441494,  0.60667904, -0.91294873,  1.4931781 ,
       -0.50714775,  0.17918581,  0.10187151,  0.19888033, -0.23233946,
        0.38808384, -0.77784461, -0.05067875, -0.44526459,  0.65038865,
        0.61793873,  0.41977746,  0.03931278,  1.03782109, -0.79270721,
       -0.23509196, -0.58175262, -0.28816376, -0.62786434, -0.76154343,
       -0.02121484,  0.36600202,  0.30848905, -1.02277827, -0.90491436,
       -0.32190332,  0.7980359 , -0.84516793,  0.78542254, -0.41925635,
       -0.34969248, -0.13830829, -0.66326898,  1.66644376,  0.73850206,
        0.20918647, -0.12946429, -0.27489799, -0.61338396,  0.01489604,
       -0.00920716,  0.07679324,  0.06041227, -0.36043929,  0.4908343 ,
        0.10793016,  0.44179804,  1.62302788, -0.39203836, -0.65646433,
        0.42012415, -0.76754654, -0.43612427,  0.63693269, -0.18780504,
        0.29345674, -0.47752554, -0.51066803, -0.50136949, -1.23660266,
        0.6759182 ,  0.60936931, -0.38431159, -0.9512113 ,  0.4825992 ,
       -0.5474758 , -0.77722584,  0.30501367,  0.38040896, -0.90980416,
        0.22823712, -0.62303247, -0.40287032, -1.19199081,  0.80742959,
        0.39503309, -1.21335779,  0.56242442, -0.6759182 , -0.63629255,
        0.05150654, -0.24056905, -0.2640853 , -1.2469236 ,  1.62380447,
       -0.93345597, -0.39361427,  0.03867108,  0.69831727, -0.48414861,
        0.49748817,  1.1629611 ,  0.28510176, -0.16491794, -0.09659637,
       -1.26287169, -0.06972735,  0.37257491, -0.30848905, -1.55125093,
        0.28862968, -0.7886591 , -1.73822466, -0.49738577,  0.12782105,
       -0.10655316,  0.12628999, -0.44133582,  0.08816783, -0.34855282,
        0.28915079,  0.93784214, -0.77068463, -0.18755483, -0.87853218,
        0.48734248, -1.05100484, -0.33402075,  0.41708775,  0.52987836,
       -0.28557792, -0.50136949,  1.51236538,  0.87637734,  0.19440967,
       -0.52246955,  0.66335417, -1.81110839,  0.47199511, -0.47658976,
        0.14424498, -0.30338046,  0.80430983, -0.0273051 , -0.14029077,
        0.33454186,  0.99211032,  0.52087011,  1.05355548,  0.69037389,
       -0.87578246, -0.96265286,  0.11447901, -0.94130634, -0.31680791,
        0.20403568,  0.64806567,  0.40765523,  1.04878492, -0.85788486,
       -0.67267187, -0.90063904, -0.01489604, -0.57563268,  0.40485448,
        0.58213829,  0.72850958,  0.93240083, -0.71250103, -0.37819   ,
        0.68820881, -0.12362147, -0.08365802, -0.37172263, -0.96600515,
       -0.32869345, -0.51670507, -0.89587016,  0.5807752 ,  0.71194593,
       -0.44899597, -1.31654858, -1.79143066,  0.50318684, -0.77549694,
       -0.74880634,  0.85493421, -0.48661022, -1.40105755,  0.10047357,
       -0.4732489 , -0.43009757, -0.75281007, -0.45158478,  0.77213003,
       -0.26413885, -0.64253147, -0.24315215,  1.63076298,  1.18822766,
        0.90576656, -0.41440354,  0.08489954, -0.49029927, -0.34007205,
       -0.40234921, -0.45338953, -0.41866751, -0.06287251, -0.06620323])

In [12]: samples_median
Out[12]: 
array([-2.14728792e-01,  8.24141054e-02, -4.92966417e-01, -2.91582356e-01,
        2.95051955e-01,  1.55680301e-01,  2.36349259e-01, -1.39729416e-01,
        4.52375278e-02,  3.90519166e-01, -3.21952541e-01, -2.84308119e-01,
       -1.75838115e-02,  2.30541120e-01, -2.30967369e-01,  1.29797531e-01,
       -1.54611386e-01,  3.61816848e-01,  3.21994717e-01,  3.20089189e-01,
        2.65087966e-01,  1.02053029e-01, -3.71955025e-01,  2.60575535e-01,
       -9.50925149e-02,  7.85810825e-02,  2.56078964e-02, -2.08120600e-01,
       -1.39739531e-01, -2.50967343e-01,  2.23235706e-01,  5.27395259e-01,
       -3.36634990e-01,  8.44289059e-02, -2.19795502e-01, -2.42969921e-01,
       -4.24815309e-01,  9.00732165e-03,  9.33622590e-02,  1.10454992e-01,
       -6.33201421e-01,  3.59990534e-02,  2.31970477e-01,  2.54041285e-01,
        2.54520092e-01, -2.04523667e-01,  2.28578189e-01,  2.73856644e-01,
       -5.48875870e-01, -2.99263610e-02,  1.77533292e-02,  5.31778628e-02,
       -1.66005747e-02,  6.22777589e-01,  1.33563326e-01, -1.29466516e-01,
        3.17868153e-01,  3.16462267e-01,  3.10886553e-01,  2.45627446e-01,
        1.52608263e-01,  5.90443596e-01, -4.41036835e-01,  2.46249125e-01,
        6.34826536e-02,  1.57188513e-01, -3.18379852e-02, -1.07084807e-01,
        1.07082255e-01, -1.98085493e-01, -3.09440322e-01, -1.49026209e-01,
       -1.09124998e-01,  2.10537188e-01, -4.11958576e-01,  1.15823669e-01,
       -3.13427846e-01, -1.10735244e-01,  2.89747295e-01, -8.16737970e-02,
       -1.20303616e-01, -1.58693961e-02,  3.22363768e-02, -2.85142354e-01,
       -2.41472700e-01, -3.19185782e-01, -2.61612998e-01,  1.78695045e-01,
       -2.70150516e-01,  1.90717019e-01,  6.66833097e-02,  6.20805531e-02,
        1.71669128e-01, -1.71980138e-01,  1.92245627e-01,  4.67943847e-01,
        2.35047390e-01,  3.08967988e-01, -3.69203144e-01,  2.74133076e-02,
       -3.69729862e-01,  4.08355733e-01, -4.81856953e-01,  5.86285474e-01,
       -1.94503057e-01, -3.39241276e-01, -4.51050487e-01,  5.36306944e-02,
        6.99586100e-01, -4.51971843e-01, -1.38750358e-01, -1.23479189e-01,
        1.46557670e-01, -5.03134068e-03, -3.20370921e-01, -2.02743582e-01,
       -3.32123451e-01, -3.86433952e-01,  1.23415924e-01,  2.43274716e-01,
       -1.52579651e-01,  2.45627446e-01, -1.01981101e-01, -2.05859627e-01,
       -3.11971646e-03,  2.48063266e-01, -1.46523796e-01,  2.79898947e-01,
       -4.29742240e-01, -8.88663328e-01,  2.62605531e-02,  3.68745060e-01,
       -4.43821375e-01,  1.15616645e-01, -2.70552673e-01, -3.74853274e-01,
        4.82473612e-01, -1.09124998e-01, -3.31018543e-01,  6.72222179e-02,
        4.39508645e-02, -2.00379824e-02, -1.47388360e-01,  3.30194675e-01,
        2.50817791e-01, -5.48075951e-02,  1.25729641e-01,  2.63390750e-02,
        3.63591180e-01,  1.56721873e-02, -2.90227145e-01,  2.54106876e-02,
        5.14987367e-01,  1.89070471e-01,  2.31974770e-01,  4.17626090e-01,
        5.82334510e-02,  1.38473810e-01, -2.48063266e-01, -2.61248183e-01,
       -1.43266040e-01,  1.73611956e-01, -6.78035183e-02, -1.96868056e-03,
        4.37400549e-01, -2.53277556e-01,  3.02347326e-01,  2.79795539e-01,
       -3.58923157e-01, -2.06995023e-01, -4.10497835e-01,  3.47199082e-02,
        3.33790330e-01,  2.96496995e-01, -2.12391489e-01,  2.46224288e-01,
       -3.25874543e-01, -2.21698406e-01, -2.83813656e-01,  3.90767050e-02,
       -1.46523796e-01,  5.55615985e-02,  2.95774018e-01, -3.34616345e-01,
        3.73139676e-01, -5.20606713e-01, -2.37926274e-01, -2.57898025e-01,
       -4.37842862e-02,  1.54053567e-01,  5.98868715e-01, -3.99856294e-01,
        1.29499928e-01, -6.42771791e-01,  2.93255123e-01,  2.15033587e-01,
       -3.80111655e-01,  2.38420207e-01, -3.11971646e-03, -4.98911301e-02,
        1.42491358e-01, -3.22391738e-01, -4.22364490e-02,  3.70729101e-01,
       -3.94685186e-01,  3.35701410e-01, -1.01844823e-01, -3.10061018e-01,
       -4.21920287e-01, -6.53213726e-02,  3.33146278e-01,  1.83706039e-01,
       -2.58426325e-01,  1.29499928e-01,  1.65735914e-03, -1.96868056e-03,
       -2.85545814e-01,  7.21890087e-02,  2.14592778e-01,  6.13264554e-02,
       -3.62725534e-01,  2.70501995e-01,  1.50912426e-01,  2.02372170e-01,
       -1.34554942e-01,  1.81222599e-01,  2.51340593e-01,  5.93391470e-01,
       -1.59242314e-01, -4.84587709e-01,  2.57932965e-01,  4.28499782e-01,
       -1.76741627e-01,  1.59252429e-01, -2.66662555e-01,  5.83397872e-01,
        4.70096124e-01,  3.76127972e-01,  3.00786393e-02,  1.57997581e-01,
        1.66005747e-02, -2.08300393e-01, -3.44633795e-01,  1.36811912e-01,
       -2.54106876e-02,  2.15539400e-01, -1.52129209e-01, -1.01755426e-01,
       -4.23694128e-01,  1.04972993e-01, -3.41838509e-01,  7.69583436e-02,
       -1.22520985e-01,  5.44938867e-02, -8.36320321e-02,  4.94549784e-01,
        2.74568069e-01,  3.15286179e-01, -2.87509578e-01, -1.35215617e-01,
        1.58309999e-01, -3.35783003e-01, -1.54088973e-01, -3.37460132e-01,
       -1.40687620e-01,  4.23450174e-02,  2.59202049e-01, -1.52129209e-01,
        8.89851776e-02,  1.98822861e-01, -4.50207381e-01, -3.03477715e-01,
       -6.02895939e-02, -1.29437905e-01,  4.02713492e-01,  3.42031280e-01,
       -8.39823569e-02,  1.96868056e-03, -2.90197113e-01,  2.80534905e-02,
        3.44575273e-01,  7.04463401e-01,  2.36349259e-01, -1.63463096e-02,
       -3.45833068e-01, -6.60840402e-02,  5.11485487e-02, -3.47108159e-01,
        3.63307744e-01, -5.19646488e-02, -6.36204762e-02,  3.04818052e-01,
        1.55856848e-01,  9.90635302e-02,  1.46149948e-01, -1.37652716e-01,
        2.86358107e-01,  3.42344290e-01,  1.82345842e-01,  2.48470161e-01,
       -3.65937004e-01, -3.47613785e-01, -3.08040416e-01,  2.49337741e-02,
        3.00786393e-02,  1.64767955e-01,  2.60824321e-01, -1.46819258e-02,
        1.94878000e-01,  3.46764497e-01,  8.24141054e-02, -6.55044349e-02,
       -8.30137168e-02, -1.20295824e-01,  1.54835746e-01,  4.56665499e-02,
        8.83735703e-01, -3.31692520e-03,  1.72778758e-01,  3.61807954e-01,
       -2.58390492e-02,  5.55596650e-03, -2.19022761e-02,  2.41195415e-01,
        3.42202739e-01,  3.50751646e-01, -1.91101273e-01, -1.20559984e-01,
       -3.09440322e-01, -4.10401183e-03,  4.06448508e-01, -1.96868056e-03,
        6.63534941e-01,  3.53278420e-02, -2.17594998e-01, -1.85950867e-01,
       -3.76019732e-01,  2.62945852e-01, -1.89891125e-02,  8.50846844e-02,
        7.26700616e-02,  2.30221498e-02, -3.22363768e-02, -3.40742763e-01,
       -3.05219613e-02,  1.44171531e-01, -6.37958422e-02, -1.50407152e-01,
       -1.86201781e-01,  2.46856934e-01,  2.56078964e-02,  4.13079718e-01,
       -3.35524007e-02,  3.67605776e-01, -1.46620935e-01, -4.02952185e-01,
        2.84692281e-01,  7.76935074e-01,  1.19915495e-01, -4.08471970e-01,
        1.34691219e-01,  4.90028589e-01,  2.29223034e-01,  1.58325386e-01,
        1.05941633e-01, -3.13910063e-01,  1.05102867e-01,  5.06390088e-02,
       -1.87012782e-01,  2.60062880e-02, -3.11971646e-03, -2.97881244e-01,
       -2.48801287e-01,  2.13005727e-01,  6.77317416e-02,  9.26819231e-02,
       -2.61267570e-01,  9.53239660e-02, -2.72493913e-01, -1.46620935e-01,
        4.95980950e-02, -3.72919649e-02, -3.60065715e-02,  3.24569686e-01,
       -3.45636460e-01,  3.90022111e-02,  3.07685249e-01, -1.18015418e-01,
       -4.52888379e-02,  3.05513219e-02, -4.16305481e-02,  2.85410776e-01,
        1.40530098e-03,  3.38604413e-01,  3.91994199e-02,  1.65735914e-03,
        7.57203991e-01,  3.26825691e-01,  5.02849834e-01,  6.32140303e-01,
        5.88290513e-02, -3.94206548e-01, -1.40530098e-03, -1.47417906e-01,
       -4.41156534e-01, -3.47108159e-01, -1.07619875e-01,  3.41480010e-02,
        4.62807318e-02,  1.33982198e-01, -2.20545545e-02, -1.41075672e-01,
       -3.10877593e-01, -3.10877593e-01,  5.27472707e-01,  3.50355804e-01,
        4.34294338e-01,  2.34403636e-01, -4.16814696e-01, -1.17621845e-01,
        1.94584459e-02, -1.64220346e-01, -1.56721873e-02,  9.15770057e-02,
       -2.87224778e-01,  1.83290624e-01, -2.41041663e-01,  2.32605660e-01,
       -3.01371008e-01, -3.47988083e-01, -2.77974654e-01,  6.66833097e-02,
       -2.06751150e-01, -3.74480203e-01, -3.63110788e-02, -1.29769035e-02,
       -3.29838838e-01, -2.32919510e-01,  3.36772899e-01,  3.19263062e-01,
       -2.84550965e-01,  3.99612222e-01, -3.75540013e-01,  3.11971646e-03,
       -5.60926326e-01, -2.75132945e-01, -2.66838869e-01,  3.81060980e-01,
        3.39225410e-02,  1.04658518e-01, -3.18874577e-01,  1.39577718e-02,
        2.85081533e-01, -2.26196339e-01,  1.64483156e-01,  1.93481325e-01,
        1.04696790e-02, -3.56485707e-01, -2.69349404e-01,  2.80534905e-02,
       -2.98248861e-01,  9.03639640e-02,  1.74359704e-01,  9.99620973e-02,
       -1.61208674e-02,  1.82579339e-02,  9.87309364e-02,  3.24524490e-01,
        2.98624944e-01, -1.66524811e-01,  5.96939936e-02,  6.36349319e-02,
       -4.32496559e-01,  4.11084356e-01, -4.14979635e-02,  3.16574765e-02,
        3.29046727e-01,  2.24881713e-01,  6.23411660e-02, -2.50693231e-02,
       -2.12625618e-01, -4.33552642e-02,  3.28010800e-01, -2.95978638e-01,
        1.19328742e-01, -2.55706748e-01,  4.31281018e-01, -2.31576989e-02,
        1.95922174e-01,  4.02268466e-01,  2.08490045e-01, -1.39577718e-02,
       -3.84814873e-01,  2.84111026e-01, -2.16732327e-01, -3.33480271e-01,
        1.41188993e-01, -4.60099344e-01,  1.55680301e-01, -2.60062880e-02,
       -1.69957363e-01,  2.17379225e-01,  2.37016523e-01, -3.59876106e-01,
       -2.39661787e-02, -6.90421114e-03, -4.79771313e-02,  1.22030735e-01,
       -5.46553168e-02,  3.59990534e-02,  1.51790515e-01,  1.70014451e-01,
        1.83149902e-02,  3.64059075e-01, -4.79717993e-01, -2.73223119e-02,
        8.92327288e-02,  3.10758692e-01, -1.08116328e-01,  7.99430196e-02,
       -2.41472700e-01, -4.26149181e-01, -2.92723868e-01,  2.07425697e-01,
        4.78006412e-01, -7.12968445e-02,  5.00434084e-02, -1.64297327e-01,
       -5.79382650e-01,  4.99885377e-01,  2.32309792e-01,  2.84131003e-01,
       -7.28576900e-01,  2.42918725e-02, -2.82275869e-02, -3.57805955e-01,
        4.49777979e-01,  1.74179363e-01,  1.69124350e-01,  2.94440765e-01,
        3.33889230e-01,  3.24293352e-01, -1.39577718e-02, -3.61430031e-01,
        6.26623640e-01, -3.44969922e-01, -3.43002793e-02, -6.26956087e-02,
        1.44171531e-01,  2.12926514e-01,  4.02713492e-01, -1.13412662e-01,
        1.79582823e-01,  2.01784623e-01,  5.70563391e-05,  3.42850617e-01,
       -6.33512816e-02, -5.68647874e-01,  3.68430312e-01,  9.55480210e-02,
       -3.41480010e-02, -1.72044178e-01, -5.40521039e-02, -3.09115330e-01,
       -3.93003898e-02,  2.36842609e-01,  3.54674019e-01,  6.65898510e-02,
        2.74568069e-01, -7.59217841e-02,  2.27457118e-01, -2.08490045e-01,
       -2.51271836e-01,  1.01981101e-01, -1.58693961e-02,  2.28031091e-01,
       -1.43445362e-01,  7.82666079e-02,  2.35702067e-01, -6.01373156e-02,
        2.31139634e-01,  4.49971191e-02,  5.35627289e-01, -1.08807731e-01,
        3.00861732e-01, -1.32695092e-01,  9.18084567e-02, -4.32029858e-02,
        5.42119947e-02, -3.33492053e-01, -1.06822938e-01, -2.07691611e-02,
        1.63137022e-01,  3.74853274e-01, -2.39035877e-01, -2.25763985e-02,
       -1.40530098e-03,  1.66005747e-02, -1.39577718e-02, -5.50894870e-02,
        2.26704379e-01, -1.89891125e-02,  1.40530098e-03,  8.41993588e-02,
        2.91001009e-01,  4.60269728e-01, -2.38625672e-01, -2.49579527e-01,
        3.06178687e-01, -1.40530098e-03, -1.29769035e-02, -2.39863936e-01,
        2.68731058e-01, -7.12968445e-02,  5.12407339e-02, -4.95010847e-02,
       -4.05973137e-01, -2.25855885e-01, -3.88223060e-02,  3.46804943e-01,
       -1.47553249e-01,  3.91011707e-01,  7.65030845e-02, -3.69917717e-01,
       -7.16847903e-01, -1.01981101e-01, -6.10290268e-02, -4.45663164e-02,
        1.81243295e-01, -1.41263985e-01,  8.83895773e-02,  4.62238452e-01,
       -4.31630011e-01,  6.20805531e-02, -1.23813032e-02,  9.07929860e-02,
       -5.70563391e-05,  2.39029757e-01,  8.66815044e-02, -1.16199014e-01,
       -4.52375278e-02,  2.48863636e-01,  2.37234985e-01, -3.53722670e-01,
       -1.40530098e-03, -3.82180626e-01, -1.23103843e-01, -3.95177279e-01,
       -1.52608263e-01,  2.62395196e-01, -2.55293744e-02, -1.30270117e-01,
       -8.80791665e-02, -2.57898025e-01,  1.65735914e-03, -1.53254986e-01,
        2.19443900e-01, -4.28917482e-01, -2.42918725e-02,  3.11172438e-01,
        2.34514076e-01,  6.35941969e-01, -3.00786393e-02, -1.31275128e-01,
        2.80899556e-01, -3.72478704e-01,  4.63272934e-01, -3.48054103e-01,
       -2.01878607e-02,  2.93222045e-01, -2.85169131e-01,  3.80035408e-01,
        2.68336337e-01, -1.35136775e-01, -7.16072533e-01,  2.99434883e-01,
        1.63463096e-02,  2.72411022e-01,  4.21302407e-01, -1.95121884e-01,
        1.46308517e-01, -7.37145392e-02,  6.89931713e-02,  5.79837435e-02,
       -9.17519930e-02,  1.65605561e-01, -3.47870709e-01, -4.16502419e-02,
       -5.31056898e-01, -4.36220405e-01, -2.69346754e-02,  2.14447520e-01,
       -8.34053708e-02,  1.56721873e-02,  2.05686229e-01,  3.83831668e-01,
       -2.36962722e-02,  2.62549847e-01, -3.32123451e-01,  4.38116119e-01,
        1.75838115e-02, -4.17494171e-02,  2.25755301e-01,  2.25821396e-01,
       -2.31845374e-01, -2.89819343e-01, -3.44721199e-01,  3.77136410e-01,
       -1.22520985e-01, -4.42285141e-03, -2.56078964e-02,  1.98536339e-01,
        2.64780830e-01, -1.19818861e-01, -2.56583825e-01, -3.63185123e-01,
       -7.49066910e-02,  3.02347326e-01, -1.43429643e-01,  3.69640924e-01,
       -6.97831699e-02,  2.18306216e-01,  1.04950589e-01, -2.45246333e-01,
        5.84550093e-01, -4.24918872e-01, -6.52798848e-01, -2.93568133e-01,
       -3.46579168e-01,  2.60062880e-02, -1.28268062e-01,  2.36329603e-01,
       -1.35136775e-01,  3.46804943e-01, -2.39863936e-01, -5.70824482e-03,
       -1.58693961e-02, -5.70563391e-05,  7.65030845e-02,  2.28826974e-01,
       -3.84155103e-03, -4.66927365e-01,  2.41393858e-01,  1.14316288e-01,
       -1.24819298e-01,  1.09261275e-01,  2.58034835e-01, -1.27986772e-01,
        2.83447768e-01, -1.53211762e-01, -1.75838115e-02, -1.40530098e-03,
       -1.35706994e-01, -5.48075951e-02, -1.96868056e-03,  3.31692520e-03,
       -1.39577718e-02, -2.54265085e-04, -9.54762443e-02, -8.02856114e-02,
        1.30378832e-01,  3.45182856e-01,  6.72222179e-02,  8.56659848e-02,
       -2.62511599e-02,  3.11476176e-01,  1.78014111e-01,  2.40261680e-01,
        1.94058964e-01,  7.09569743e-03, -1.24986569e-01, -2.31576989e-02,
       -2.67261068e-01,  5.10680308e-02, -2.51493015e-01,  4.34986830e-01,
        4.06724883e-01, -9.41350416e-02,  2.88698747e-01,  7.15854042e-01,
       -4.56665499e-02, -3.22947664e-01, -1.01657079e-01,  2.31088730e-01,
       -4.05387770e-01, -5.84399864e-01,  2.95151742e-01,  2.56649527e-02,
       -3.78732653e-02,  2.71327987e-01,  2.69554519e-01,  8.25971677e-02,
        2.44880227e-02,  3.92564762e-02, -4.79625870e-01,  4.17657578e-01,
        1.43544210e-01, -3.37046790e-02,  1.49617002e-01,  2.95601126e-02,
        1.75933333e-01,  1.89891125e-02,  7.59217841e-02, -2.79769704e-01,
       -1.43429643e-01,  3.49660721e-01, -2.70761756e-01, -5.26544418e-02,
       -4.49846827e-01, -2.57610781e-01, -6.49088345e-02, -1.40530098e-03,
        2.80565851e-01,  6.13192434e-01,  5.70563391e-05,  2.20761209e-01,
       -9.12625311e-02, -3.75098269e-02, -3.44721199e-01,  4.85701051e-02,
       -2.54106876e-02, -1.29466516e-01,  5.25097436e-01, -1.96868056e-03,
        6.36349319e-02,  8.24141054e-02,  4.02869168e-01, -4.13015541e-01,
        2.37170992e-01, -7.96900110e-02,  3.07582483e-01, -2.72493913e-01,
       -7.03910093e-02,  2.80534905e-02,  2.12966403e-01,  2.06275042e-01,
        1.05931197e-01, -4.14979635e-02,  1.78014111e-01,  3.09768643e-01,
        2.25536596e-01, -1.55558909e-01,  3.13732262e-01,  1.40530098e-03,
        1.49026209e-01, -2.07772882e-01,  3.28489396e-01,  3.23860973e-01,
       -2.24265202e-02, -2.06403230e-01,  3.14373924e-01, -6.19976668e-02,
       -2.40693354e-01,  3.63086428e-01,  8.54967951e-02, -1.19964383e-01,
       -2.72493913e-01, -7.12968445e-02, -2.41116572e-01, -4.35898153e-01,
        1.65948118e-01,  3.01929015e-01,  2.19022761e-02, -5.04965309e-01,
        3.95166366e-01, -3.86971769e-01,  2.65653483e-01,  2.27274236e-01,
       -1.89255477e-01, -5.84185500e-01,  2.95978638e-01, -3.45946282e-01,
       -1.94566820e-02, -3.95376863e-01,  2.09149787e-01, -5.70563391e-05,
       -3.47293014e-02,  2.89885215e-01, -2.93919496e-01, -3.17930548e-02,
        1.89717643e-01, -1.97471255e-01,  2.17163603e-01, -5.13125105e-02,
        7.21822199e-02, -6.89557393e-01, -1.54745308e-01,  1.73905362e-01,
        1.21026037e-01, -2.84896691e-01,  2.62945852e-01,  1.37480967e-01,
        1.19075549e-01,  6.07186160e-02,  4.60823031e-01, -3.94525273e-01,
        2.26447176e-01, -3.35524007e-02, -3.43202453e-01, -4.80525781e-01,
       -2.36312363e-01,  2.63390750e-02, -8.02856114e-02, -7.96755637e-02,
       -6.96781694e-02, -3.88842238e-01,  1.37652716e-01,  5.55596650e-03,
       -8.69701852e-02,  8.02856114e-02, -1.65735914e-03,  4.02670623e-01,
       -1.35790810e-01, -1.59685891e-02, -2.80094640e-01,  1.20295824e-01,
        1.96868056e-03,  2.34063404e-01,  2.63619819e-01,  2.40975380e-01,
        3.54003582e-01, -2.27979539e-01,  5.76252110e-01,  5.04867304e-02,
        1.46620935e-01, -3.39269028e-01, -1.45753947e-01, -2.10029357e-01,
       -9.35507291e-02, -2.03747774e-01, -4.43922199e-02, -3.00604759e-01,
        3.20346485e-01,  1.46087687e-01,  2.44880227e-02, -2.96263437e-01,
        4.53909678e-01,  2.82981910e-01,  1.61092202e-01, -6.49231345e-02,
       -9.21685422e-02, -1.67992939e-01,  1.26682280e-01,  6.33548830e-02,
       -2.86477711e-01, -6.18519070e-02,  3.15648312e-01,  3.38749614e-01,
       -1.11333733e-01, -3.43827294e-01,  1.33361225e-01, -2.93255123e-01,
        2.22517632e-02, -2.67739701e-01,  3.00897563e-01, -7.54997925e-02,
        3.84688657e-02,  1.92852648e-01, -6.01156564e-01,  1.56278781e-01,
        2.26500323e-01,  1.97296131e-01,  4.59675437e-01, -4.80687245e-01,
       -3.68990569e-01, -1.44784430e-01, -2.53427408e-01, -4.48572503e-01,
        2.45596752e-01, -1.96868056e-03, -1.86960020e-01,  3.24335855e-02,
       -4.54979596e-01,  1.08226430e-01, -3.71379789e-01, -3.16180408e-01,
       -3.55775495e-02, -3.99856294e-01, -3.10176825e-01, -1.61792669e-01,
       -1.10056974e-01, -2.62448734e-01,  3.75411843e-01, -7.49041922e-02,
        3.43994545e-02, -1.04658518e-01, -3.72992641e-01,  3.93345595e-01,
        4.37465073e-01,  4.92684422e-01, -4.75612628e-02, -2.08394652e-01,
       -9.21942382e-02, -7.19003279e-02,  2.75282065e-01,  8.80791665e-02,
        3.44603984e-01, -3.14899248e-01, -1.72123020e-01, -3.05478567e-01])

In [13]: samples_percentile.shape
Out[13]: (1000,)

In [14]: samples_median.shape
Out[14]: (1000,)

In [20]: test_stat_percentile
Out[20]: 1.6951624543447839

In [21]: test_stat_median
Out[21]: 0.6434965714975927



#Set test_stat_percentile and test_stat_median equal to the difference in 80th percentile and medians of donations_A and donations_B (pre-loaded).
# Calculate the test statistic from the original dataset and corresponding p-values
test_stat_percentile = np.percentile(donations_A, 80)-np.percentile(donations_B, 80)
test_stat_median = np.median(donations_A)-np.median(donations_B)






















#Calculate the corresponding p-values p_val_percentile and p_val_median as two times the fraction of percentile and median samples, respectively, greater than or equal to the absolute value of the respective test statistics.
p_val_percentile = 2*np.sum(samples_percentile >= np.abs(test_stat_percentile))/reps
p_val_median = 2*np.sum(samples_median >= np.abs(test_stat_median))/reps

print("80th Percentile: test statistic = {}, p-value = {}".format(test_stat_percentile, p_val_percentile))
print("Median: test statistic = {}, p-value = {}".format(test_stat_median, p_val_median))

<script.py> output:
    80th Percentile: test statistic = 1.6951624543447839, p-value = 0.026
    Median: test statistic = 0.6434965714975927, p-value = 0.014


