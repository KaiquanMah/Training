Randomised statistics and dotplot

By permuting the home ownership variable multiple times, you generate differences in proportions that are consistent with the assumption that the variables are unrelated. The statistic of interest is the difference in proportions given by stat = "diff in props". After calculating the randomized statistics, you will plot them in a dotplot.

This exercise shows all four steps from the infer package:

specify will specify the response and explanatory variables.
hypothesize will declare the null hypothesis.
generate will generate resamples, permutations, or simulations.
calculate will calculate summary statistics.

Each step will be covered throughout the course; in this exercise you'll write code for calculate().

The dplyr, ggplot2, NHANES, and infer packages have been loaded for you. Repeat the permuting and plotting with 100 differences in proportions generated by shuffling the HomeOwn variable.






Using the infer framework, step through specifying the null model and then performing 100 permutations to evaluate whether home ownership status (i.e. HomeOwn) differs between the "female" and "male" groups:
specify(), hypothesize(), and generate() have been done for you.
calculate() the statistic "diff in props" with the order of c("male", "female").

# Perform 100 permutations
homeown_perm <- homes %>%
  specify(HomeOwn ~ Gender, success = "Own") %>%
  hypothesize(null = "independence") %>% 
  generate(reps = 100, type = "permute") %>% 
  calculate("diff in props", order = c("male", "female"))
  
# Print results to console
homeown_perm

> homeown_perm
# A tibble: 100 x 2
   replicate     stat
       <int>    <dbl>
 1         1  0.0148 
 2         2  0.0136 
 3         3  0.00329
 4         4 -0.00577
 5         5  0.0181 
 6         6  0.00247
 7         7 -0.00289
 8         8  0.00823
 9         9  0.0115 
10        10 -0.0119 
# ... with 90 more rows





Using homeown_perm, plot the 100 differences in proportions using geom_dotplot. Adjust the size of the dots by setting binwidth to 0.001 in your call to geom_dotplot().

# Perform 100 permutations
homeown_perm <- homes %>%
  specify(HomeOwn ~ Gender, success = "Own") %>%
  hypothesize(null = "independence") %>% 
  generate(reps = 100, type = "permute") %>% 
  calculate(stat = "diff in props", order = c("male", "female"))
  
# Dotplot of 100 permuted differences in proportions
ggplot(homeown_perm, aes(x = stat)) + 
      geom_dotplot(binwidth=0.001)


It's much easier to get a feel for the distribution of randomized statistics now. In the next exercise, you'll see how 1000 randomized statistics are distributed.


