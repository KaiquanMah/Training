When you take a long series of iid data, such as several thousand observations, and select a small subset of the most extreme observations, like less than 100, then these extremes appear at random and the spaces or gaps between the extremes follow a distribution that is very close to exponential. When we carry out the same exercise for a volatile financial log-return series then the extremes appear in clusters during periods of high volatility. This is another feature of real log-return data that we need to take account of when building models.

In this exercise, you will investigate the irregular time series djx_extremes which contains the 100 most extreme negative log-returns of the Dow Jones index between 1985 and 2015. You will compare it with iid_extremes which contains the 100 most extreme values in an iid series of the same length as djx_extremes. To do this, you will use the object exp_quantiles, which contains 100 theoretical quantiles of the standard exponential distribution. These can be used to construct a Q-Q plot of each dataset against the exponential reference distribution.

The djx_extremes, iid_extremes, and exp_quantiles objects are available in your workspace.


Partition the plotting area into a row of 3 panels (this has been done for you)
Use plot() and type = "h" to plot djx_extremes.
Use time() and diff() in succession to compute the spaces between the dates of the extremes and assign them to djx_spaces.
Use hist() and as.numeric() in succession to make a histogram of djx_spaces after coercing the data to numeric values.
Use the appropriate function to make a Q-Q plot of djx_spaces against the exponential quantiles in exp_quantiles.
Carry out the previous 4 steps for iid_extremes: plot the raw data with same type parameter, compute the spaces as iid_spaces, make a histogram, and make a Q-Q plot.


> djx_extremes
                 ^DJI
1987-04-03 0.02967454
1987-04-21 0.02885388
1987-09-22 0.02973225
1987-10-20 0.05715363
1987-10-21 0.09666177
1987-10-27 0.02887776
1987-10-29 0.04836154
1987-10-30 0.02808020
1987-11-12 0.03161887
1987-12-08 0.03054134
1987-12-14 0.03464645
1988-01-04 0.03865858
1988-04-06 0.03161489
1988-05-31 0.03746090
1989-10-16 0.03372271
1990-08-27 0.03060175
1990-10-18 0.02679580
1990-10-19 0.02737476
1991-01-17 0.04466476
1991-08-21 0.02978849
1991-12-23 0.02958054
1997-09-02 0.03321123
1997-10-28 0.04599871
1997-11-03 0.03073702
1998-09-01 0.03753544
1998-09-08 0.04860532
1998-09-23 0.03205061
1998-10-15 0.04064707
1999-03-05 0.02798422
2000-03-15 0.03211182
2000-03-16 0.04809608
2000-04-03 0.02709810
2000-04-17 0.02649873
2000-12-05 0.03148207
2001-01-03 0.02775289
2001-04-05 0.04144268
2001-04-18 0.03831967
2001-05-16 0.03105432
2001-09-24 0.04371931
2002-05-08 0.03056344
2002-07-05 0.03521271
2002-07-24 0.06154724
2002-07-29 0.05273172
2002-08-06 0.02824847
2002-08-08 0.02980959
2002-08-14 0.03029658
2002-10-01 0.04467501
2002-10-10 0.03342774
2002-10-11 0.04113098
2002-10-15 0.04690352
2002-10-17 0.02930861
2002-11-27 0.02899548
2003-01-02 0.03137756
2003-03-13 0.03508664
2003-03-17 0.03527631
2003-03-21 0.02800780
2008-03-11 0.03487485
2008-03-18 0.03451290
2008-04-01 0.03142425
2008-08-05 0.02896450
2008-09-18 0.03791879
2008-09-19 0.03291513
2008-09-30 0.04574774
2008-10-13 0.10508346
2008-10-16 0.04572714
2008-10-20 0.04562199
2008-10-28 0.10325919
2008-11-04 0.03224860
2008-11-07 0.02812262
2008-11-13 0.06458521
2008-11-21 0.06337643
2008-11-24 0.04815658
2008-11-26 0.02872910
2008-12-02 0.03259548
2008-12-05 0.03047319
2008-12-08 0.03401199
2008-12-16 0.04113064
2009-01-02 0.02900654
2009-01-21 0.03449764
2009-02-06 0.02661985
2009-02-24 0.03265391
2009-03-10 0.05633869
2009-03-12 0.03399651
2009-03-23 0.06611575
2009-04-02 0.02750928
2009-04-09 0.03093996
2009-05-18 0.02807605
2009-07-15 0.03024786
2010-05-10 0.03824696
2010-05-27 0.02812757
2010-06-10 0.02723198
2010-07-07 0.02779873
2011-08-09 0.03900062
2011-08-11 0.03873368
2011-08-23 0.02924301
2011-10-10 0.02929347
2011-10-27 0.02820318
2011-11-30 0.04153331
2011-12-20 0.02826519
2015-08-26 0.03875487























> iid_extremes
               [,1]
1985-04-01 2.485179
1985-05-28 2.335036
1985-08-12 2.348495
1986-07-23 2.609534
1986-07-28 2.571431
1987-01-08 2.505418
1987-07-16 3.436557
1987-11-20 2.306443
1987-12-28 2.406384
1988-03-08 2.249789
1988-06-09 2.699147
1988-10-26 2.384733
1989-05-02 2.462003
1989-10-11 2.825771
1989-10-27 2.658806
1990-01-24 2.696008
1990-06-19 2.484846
1990-06-29 2.253926
1990-11-13 2.390248
1990-12-06 2.753181
1991-10-30 3.026417
1992-01-14 2.305134
1992-03-09 2.365227
1992-06-16 2.499355
1993-08-05 2.844757
1994-10-11 2.290955
1995-02-14 3.048307
1995-04-24 2.906714
1995-11-22 2.536778
1995-12-18 2.574244
1996-02-01 2.740777
1996-05-02 2.259236
1996-05-15 2.247154
1996-08-27 2.338442
1996-10-07 2.597085
1996-10-25 2.435009
1997-03-24 2.905871
1997-07-29 2.211387
1997-09-10 2.807309
1998-05-01 2.763350
1998-06-01 2.505434
1998-07-17 2.512933
1998-08-12 2.655662
1999-08-31 2.362114
2000-02-03 2.300621
2000-04-05 2.635403
2000-05-26 2.554976
2000-10-05 2.255644
2001-03-29 2.397592
2001-04-09 2.214528
2001-05-31 2.391973
2001-07-12 2.724260
2001-08-23 2.926669
2001-09-06 2.213251
2001-10-25 2.576326
2002-06-07 2.249265
2002-08-14 2.402427
2002-08-20 2.678113
2003-03-05 2.243226
2003-03-07 2.513481
2004-01-13 2.961663
2004-02-06 2.597378
2004-07-29 2.498836
2004-08-23 2.983134
2006-04-28 2.234179
2006-05-10 2.769461
2006-10-09 2.288106
2006-11-06 2.465069
2007-04-11 2.236144
2007-05-02 2.732343
2007-08-22 2.610239
2007-09-24 2.432895
2008-01-29 2.319882
2008-03-20 2.215825
2008-11-19 2.606343
2009-03-19 3.282729
2009-04-21 2.437939
2010-03-30 3.132531
2010-07-16 2.231877
2010-09-14 2.391024
2011-05-06 2.441499
2011-05-10 2.389186
2011-07-01 2.319438
2011-09-30 2.926213
2012-01-11 2.457484
2012-06-05 3.396832
2013-09-18 2.288507
2013-09-19 2.240025
2013-10-23 2.696893
2013-11-07 2.541371
2014-02-27 2.410939
2014-03-11 2.515650
2014-06-05 2.660812
2014-07-10 2.378425
2014-07-28 2.274061
2015-02-18 2.544918
2015-07-21 2.236294
2015-08-04 2.569099
2015-12-01 3.256515
2015-12-28 2.428861


















> exp_quantiles
  [1] 0.005012542 0.015113638 0.025317808 0.035627178 0.046043939 0.056570351
  [7] 0.067208750 0.077961541 0.088831214 0.099820335 0.110931561 0.122167634
 [13] 0.133531393 0.145025772 0.156653810 0.168418652 0.180323554 0.192371893
 [19] 0.204567166 0.216913002 0.229413164 0.242071561 0.254892250 0.267879445
 [25] 0.281037530 0.294371061 0.307884780 0.321583624 0.335472736 0.349557476
 [31] 0.363843433 0.378336441 0.393042588 0.407968238 0.423120043 0.438504962
 [37] 0.454130280 0.470003629 0.486133011 0.502526821 0.519193873 0.536143432
 [43] 0.553385238 0.570929548 0.588787165 0.606969484 0.625488532 0.644357016
 [49] 0.663588378 0.683196850 0.703197516 0.723606388 0.744440475 0.765717873
 [55] 0.787457860 0.809680997 0.832409248 0.855666110 0.879476759 0.903868212
 [61] 0.928869514 0.954511945 0.980829253 1.007857925 1.035637490 1.064210862
 [67] 1.093624747 1.123930097 1.155182640 1.187443502 1.220779923 1.255266099
 [73] 1.290984181 1.328025453 1.366491734 1.406497068 1.448169765 1.491654877
 [79] 1.537117251 1.584745300 1.634755720 1.687399454 1.742969305 1.801809805
 [85] 1.864330162 1.931021537 2.002480501 2.079441542 2.162823151 2.253794929
 [91] 2.353878387 2.465104022 2.590267165 2.733368009 2.900422094 3.101092789
 [97] 3.352407217 3.688879454 4.199705078 5.298317367
 
 
 
 
 
 
 
 
 
 
 
 
 # Partition plotting area into 3 pieces
par(mfrow = c(1, 3))

# Plot djx_extremes
plot(djx_extremes, type="h")

# Compute the spaces between the times of the extremes
djx_spaces <- diff(time(djx_extremes))

# Make a histogram of these spaces
hist(as.numeric(djx_spaces))

# Make a Q-Q plot of djx_spaces against exp_quantiles
qqplot(exp_quantiles, djx_spaces)

# Carry out the previous 4 steps for iid_extremes
plot(iid_extremes, type="h")
iid_spaces <- diff(time(iid_extremes))
hist(as.numeric(iid_spaces))
qqplot(exp_quantiles, iid_spaces)

Note how strongly clustered the extreme returns are compared with the extremes in the iid series.




