The previous exercise carried the last observation of the prior day forward into the first observation of the following day. This exercise will show you how to fill missing values by trading day, without using the prior day's final value.

You will use the same split-lapply-rbind paradigm from the Introduction to xts and zoo course. For reference, the pattern is below.
x_split <- split(x, f = "months")
x_list <- lapply(x_split, cummax)
x_list_rbind <- do.call(rbind, x_list)

Recall that the do.call(rbind, ...) syntax allows you to pass a list of objects to rbind() instead of having to type all their names.

Your workspace has a trade_day object that contains the regular series from the previous exercise, but without any NA filled in.




Create a daily_list object by using split() to put the trade_day data into a list of data for each day.
Now use lapply() to fill the NA for each day's data in the daily_list list.
Finally, use do.call() and rbind() to convert daily_filled to a single xts object named filled_by_trade_day.



>trade_day
                    data
2010-01-04 09:00:00   NA
2010-01-04 09:30:00   NA
2010-01-04 10:00:00   NA
2010-01-04 10:30:00   NA
2010-01-04 11:00:00   NA
2010-01-04 11:30:00   NA
2010-01-04 12:00:00    1
2010-01-04 12:30:00   NA
2010-01-04 13:00:00   NA
2010-01-04 13:30:00   NA
2010-01-04 14:00:00    2
2010-01-04 14:30:00   NA
2010-01-04 15:00:00   NA
2010-01-04 15:30:00   NA
2010-01-04 16:00:00   NA
2010-01-05 09:00:00    7
2010-01-05 09:30:00   NA
2010-01-05 10:00:00   NA
2010-01-05 10:30:00   NA
2010-01-05 11:00:00    8
2010-01-05 11:30:00   NA
2010-01-05 12:00:00   NA
2010-01-05 12:30:00   NA
2010-01-05 13:00:00   NA
2010-01-05 13:30:00   NA
2010-01-05 14:00:00   NA
2010-01-05 14:30:00   NA
2010-01-05 15:00:00   NA
2010-01-05 15:30:00   NA
2010-01-05 16:00:00   NA
2010-01-06 09:00:00   NA
2010-01-06 09:30:00   NA
2010-01-06 10:00:00   NA
2010-01-06 10:30:00   NA
2010-01-06 11:00:00   NA
2010-01-06 11:30:00   NA
2010-01-06 12:00:00   NA
2010-01-06 12:30:00   NA
2010-01-06 13:00:00   NA
2010-01-06 13:30:00   NA
2010-01-06 14:00:00   11
2010-01-06 14:30:00   NA
2010-01-06 15:00:00   NA
2010-01-06 15:30:00   NA
2010-01-06 16:00:00   NA
2010-01-07 09:00:00   NA
2010-01-07 09:30:00   NA
2010-01-07 10:00:00   NA
2010-01-07 10:30:00   NA
2010-01-07 11:00:00   NA
2010-01-07 11:30:00   NA
2010-01-07 12:00:00   NA
2010-01-07 12:30:00   NA
2010-01-07 13:00:00   NA
2010-01-07 13:30:00   NA
2010-01-07 14:00:00   NA
2010-01-07 14:30:00   NA
2010-01-07 15:00:00   NA
2010-01-07 15:30:00   NA
2010-01-07 16:00:00   NA
2010-01-08 09:00:00   NA
2010-01-08 09:30:00   NA
2010-01-08 10:00:00   NA
2010-01-08 10:30:00   NA
2010-01-08 11:00:00   NA
2010-01-08 11:30:00   NA
2010-01-08 12:00:00   NA
2010-01-08 12:30:00   NA
2010-01-08 13:00:00   NA
2010-01-08 13:30:00   NA
2010-01-08 14:00:00   NA
2010-01-08 14:30:00   NA
2010-01-08 15:00:00   NA
2010-01-08 15:30:00   NA
2010-01-08 16:00:00   NA




























# Split trade_day into days
daily_list <- split(trade_day , f = "days")
daily_list
[[1]]
                    data
2010-01-04 09:00:00   NA
2010-01-04 09:30:00   NA
2010-01-04 10:00:00   NA
2010-01-04 10:30:00   NA
2010-01-04 11:00:00   NA
2010-01-04 11:30:00   NA
2010-01-04 12:00:00    1
2010-01-04 12:30:00   NA
2010-01-04 13:00:00   NA
2010-01-04 13:30:00   NA
2010-01-04 14:00:00    2
2010-01-04 14:30:00   NA
2010-01-04 15:00:00   NA
2010-01-04 15:30:00   NA
2010-01-04 16:00:00   NA

[[2]]
                    data
2010-01-05 09:00:00    7
2010-01-05 09:30:00   NA
2010-01-05 10:00:00   NA
2010-01-05 10:30:00   NA
2010-01-05 11:00:00    8
2010-01-05 11:30:00   NA
2010-01-05 12:00:00   NA
2010-01-05 12:30:00   NA
2010-01-05 13:00:00   NA
2010-01-05 13:30:00   NA
2010-01-05 14:00:00   NA
2010-01-05 14:30:00   NA
2010-01-05 15:00:00   NA
2010-01-05 15:30:00   NA
2010-01-05 16:00:00   NA

[[3]]
                    data
2010-01-06 09:00:00   NA
2010-01-06 09:30:00   NA
2010-01-06 10:00:00   NA
2010-01-06 10:30:00   NA
2010-01-06 11:00:00   NA
2010-01-06 11:30:00   NA
2010-01-06 12:00:00   NA
2010-01-06 12:30:00   NA
2010-01-06 13:00:00   NA
2010-01-06 13:30:00   NA
2010-01-06 14:00:00   11
2010-01-06 14:30:00   NA
2010-01-06 15:00:00   NA
2010-01-06 15:30:00   NA
2010-01-06 16:00:00   NA

[[4]]
                    data
2010-01-07 09:00:00   NA
2010-01-07 09:30:00   NA
2010-01-07 10:00:00   NA
2010-01-07 10:30:00   NA
2010-01-07 11:00:00   NA
2010-01-07 11:30:00   NA
2010-01-07 12:00:00   NA
2010-01-07 12:30:00   NA
2010-01-07 13:00:00   NA
2010-01-07 13:30:00   NA
2010-01-07 14:00:00   NA
2010-01-07 14:30:00   NA
2010-01-07 15:00:00   NA
2010-01-07 15:30:00   NA
2010-01-07 16:00:00   NA

[[5]]
                    data
2010-01-08 09:00:00   NA
2010-01-08 09:30:00   NA
2010-01-08 10:00:00   NA
2010-01-08 10:30:00   NA
2010-01-08 11:00:00   NA
2010-01-08 11:30:00   NA
2010-01-08 12:00:00   NA
2010-01-08 12:30:00   NA
2010-01-08 13:00:00   NA
2010-01-08 13:30:00   NA
2010-01-08 14:00:00   NA
2010-01-08 14:30:00   NA
2010-01-08 15:00:00   NA
2010-01-08 15:30:00   NA
2010-01-08 16:00:00   NA






















# Use lapply to call na.locf for each day in daily_list
daily_filled <- lapply(daily_list, FUN = na.locf)
daily_filled
[[1]]
                    data
2010-01-04 09:00:00   NA
2010-01-04 09:30:00   NA
2010-01-04 10:00:00   NA
2010-01-04 10:30:00   NA
2010-01-04 11:00:00   NA
2010-01-04 11:30:00   NA
2010-01-04 12:00:00    1
2010-01-04 12:30:00    1
2010-01-04 13:00:00    1
2010-01-04 13:30:00    1
2010-01-04 14:00:00    2
2010-01-04 14:30:00    2
2010-01-04 15:00:00    2
2010-01-04 15:30:00    2
2010-01-04 16:00:00    2

[[2]]
                    data
2010-01-05 09:00:00    7
2010-01-05 09:30:00    7
2010-01-05 10:00:00    7
2010-01-05 10:30:00    7
2010-01-05 11:00:00    8
2010-01-05 11:30:00    8
2010-01-05 12:00:00    8
2010-01-05 12:30:00    8
2010-01-05 13:00:00    8
2010-01-05 13:30:00    8
2010-01-05 14:00:00    8
2010-01-05 14:30:00    8
2010-01-05 15:00:00    8
2010-01-05 15:30:00    8
2010-01-05 16:00:00    8

[[3]]
                    data
2010-01-06 09:00:00   NA
2010-01-06 09:30:00   NA
2010-01-06 10:00:00   NA
2010-01-06 10:30:00   NA
2010-01-06 11:00:00   NA
2010-01-06 11:30:00   NA
2010-01-06 12:00:00   NA
2010-01-06 12:30:00   NA
2010-01-06 13:00:00   NA
2010-01-06 13:30:00   NA
2010-01-06 14:00:00   11
2010-01-06 14:30:00   11
2010-01-06 15:00:00   11
2010-01-06 15:30:00   11
2010-01-06 16:00:00   11

[[4]]
                    data
2010-01-07 09:00:00   NA
2010-01-07 09:30:00   NA
2010-01-07 10:00:00   NA
2010-01-07 10:30:00   NA
2010-01-07 11:00:00   NA
2010-01-07 11:30:00   NA
2010-01-07 12:00:00   NA
2010-01-07 12:30:00   NA
2010-01-07 13:00:00   NA
2010-01-07 13:30:00   NA
2010-01-07 14:00:00   NA
2010-01-07 14:30:00   NA
2010-01-07 15:00:00   NA
2010-01-07 15:30:00   NA
2010-01-07 16:00:00   NA

[[5]]
                    data
2010-01-08 09:00:00   NA
2010-01-08 09:30:00   NA
2010-01-08 10:00:00   NA
2010-01-08 10:30:00   NA
2010-01-08 11:00:00   NA
2010-01-08 11:30:00   NA
2010-01-08 12:00:00   NA
2010-01-08 12:30:00   NA
2010-01-08 13:00:00   NA
2010-01-08 13:30:00   NA
2010-01-08 14:00:00   NA
2010-01-08 14:30:00   NA
2010-01-08 15:00:00   NA
2010-01-08 15:30:00   NA


















2010-01-08 16:00:00   NA
# Use do.call to rbind the results
filled_by_trade_day <- do.call(rbind, daily_filled)
filled_by_trade_day
                    data
2010-01-04 09:00:00   NA
2010-01-04 09:30:00   NA
2010-01-04 10:00:00   NA
2010-01-04 10:30:00   NA
2010-01-04 11:00:00   NA
2010-01-04 11:30:00   NA
2010-01-04 12:00:00    1
2010-01-04 12:30:00    1
2010-01-04 13:00:00    1
2010-01-04 13:30:00    1
2010-01-04 14:00:00    2
2010-01-04 14:30:00    2
2010-01-04 15:00:00    2
2010-01-04 15:30:00    2
2010-01-04 16:00:00    2
2010-01-05 09:00:00    7
2010-01-05 09:30:00    7
2010-01-05 10:00:00    7
2010-01-05 10:30:00    7
2010-01-05 11:00:00    8
2010-01-05 11:30:00    8
2010-01-05 12:00:00    8
2010-01-05 12:30:00    8
2010-01-05 13:00:00    8
2010-01-05 13:30:00    8
2010-01-05 14:00:00    8
2010-01-05 14:30:00    8
2010-01-05 15:00:00    8
2010-01-05 15:30:00    8
2010-01-05 16:00:00    8
2010-01-06 09:00:00   NA
2010-01-06 09:30:00   NA
2010-01-06 10:00:00   NA
2010-01-06 10:30:00   NA
2010-01-06 11:00:00   NA
2010-01-06 11:30:00   NA
2010-01-06 12:00:00   NA
2010-01-06 12:30:00   NA
2010-01-06 13:00:00   NA
2010-01-06 13:30:00   NA
2010-01-06 14:00:00   11
2010-01-06 14:30:00   11
2010-01-06 15:00:00   11
2010-01-06 15:30:00   11
2010-01-06 16:00:00   11
2010-01-07 09:00:00   NA
2010-01-07 09:30:00   NA
2010-01-07 10:00:00   NA
2010-01-07 10:30:00   NA
2010-01-07 11:00:00   NA
2010-01-07 11:30:00   NA
2010-01-07 12:00:00   NA
2010-01-07 12:30:00   NA
2010-01-07 13:00:00   NA
2010-01-07 13:30:00   NA
2010-01-07 14:00:00   NA
2010-01-07 14:30:00   NA
2010-01-07 15:00:00   NA
2010-01-07 15:30:00   NA
2010-01-07 16:00:00   NA
2010-01-08 09:00:00   NA
2010-01-08 09:30:00   NA
2010-01-08 10:00:00   NA
2010-01-08 10:30:00   NA
2010-01-08 11:00:00   NA
2010-01-08 11:30:00   NA
2010-01-08 12:00:00   NA
2010-01-08 12:30:00   NA
2010-01-08 13:00:00   NA
2010-01-08 13:30:00   NA
2010-01-08 14:00:00   NA
2010-01-08 14:30:00   NA
2010-01-08 15:00:00   NA
2010-01-08 15:30:00   NA
2010-01-08 16:00:00   NA

