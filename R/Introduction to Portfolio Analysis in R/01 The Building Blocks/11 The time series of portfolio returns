In the previous exercise, you created a variable called returns from the daily prices of stocks of Apple and Microsoft. In this exercise, you will create two portfolios using the return series you previously created. The two portfolios will differ in one way, and that is the weighting of the assets.

In the last video, you were introduced to two weighting strategies: the buy and hold strategy, and a monthly rebalancing strategy. In this exercise, you will create a portfolio in which you don’t rebalance, and one where you rebalance monthly. You will then visualize the portfolio returns of both.

You will use the function Return.portfolio() for your calculations. For this function, you will provide three arguments: R, weights, and rebalance_on. R is a time series of returns, weights is a vector containing asset weights, and rebalance_on specifies which calendar-period to rebalance on. If you need help, be sure to check the documentation by clicking on the function!
http://www.rdocumentation.org/packages/PerformanceAnalytics/functions/Return.portfolio
For this exercise, you will be working with the returns data that are pre-loaded in your workspace.



Create a vector of weights for two equally weighted assets called eq_weights. Remember that weights must add to 1.
Create a portfolio using the buy and hold strategy using Return.portfolio(). Note, you do not need to specify a rebalance period. Call this pf_bh.
Create a portfolio where you rebalance your weights monthly. Use Return.portfolio() with the argument rebalance_on = "months". Call this pf_rebal.
Plot the time series of each portfolio using plot.zoo(). par(mfrow = c(2, 1), mar = c(2, 4, 2, 2)) is used to organize the plots you create. Do not alter this code.


# http://rfunction.com/archives/1302
# par(mar, mgp, las)
# par(mar=c(5.1, 4.1, 4.1, 2.1), mgp=c(3, 1, 0), las=0)
# par sets or adjusts plotting parameters. Here we consider the following three parameters: margin size (mar), axis label locations (mgp), and axis label orientation (las).
# mar – A numeric vector of length 4, which sets the margin sizes in the following order: 
# bottom, left, top, and right. The default is c(5.1, 4.1, 4.1, 2.1).
# mgp – A numeric vector of length 3, which sets the axis label locations relative to the edge of the inner plot window. The first value represents the location the labels (i.e. xlab and ylab in plot), the second the tick-mark labels, and third the tick marks. The default is c(3, 1, 0).
# las – A numeric value indicating the orientation of the tick mark labels and any other text added to a plot after its initialization. The options are as follows: always parallel to the axis (the default, 0), always horizontal (1), always perpendicular to the axis (2), and always vertical (3).




# Create the weights
eq_weights <- c(0.5, 0.5)

# Create a portfolio using buy and hold
pf_bh <- Return.portfolio(R = returns, 
                          weights = eq_weights)

# Create a portfolio rebalancing monthly 
pf_rebal <- Return.portfolio(R = returns, 
                          weights = eq_weights,
                          rebalance_on = "months")


# Plot the time-series
par(mfrow = c(2, 1), mar = c(2, 4, 2, 2))
plot.zoo(pf_bh)
plot.zoo(pf_rebal)

data:image/png;base64,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
You will see based on the plots that rebalancing a portfolio can lead to less extreme returns in either direction.




>
class(returns)
[1] "zoo"


