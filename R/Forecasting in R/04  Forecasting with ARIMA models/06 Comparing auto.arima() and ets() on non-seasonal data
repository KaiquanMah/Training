The AICc statistic is useful for selecting between models in the same class. For example, you can use it to select an ETS model or to select an ARIMA model. However, you cannot use it to compare ETS and ARIMA models because they are in different model classes.

Instead, you can use time series cross-validation to compare an ARIMA model and an ETS model on the austa data. Because tsCV() requires functions that return forecast objects, you will set up some simple functions that fit the models and return the forecasts. The arguments of tsCV() are a time series, forecast function, and forecast horizon h. Examine this code snippet from the second chapter:

e <- matrix(NA_real_, nrow = 1000, ncol = 8)
for (h in 1:8)
  e[, h] <- tsCV(goog, naive, h = h)
  ...
  
Furthermore, recall that pipe operators in R take the value of whatever is on the left and pass it as an argument to whatever is on the right, step by step, from left to right. Here's an example based on code you saw in an earlier chapter:

# Plot 20-year forecasts of the lynx series modeled by ets()
lynx %>% ets() %>% forecast(h = 20) %>% autoplot()
In this exercise, you will compare the MSE of two forecast functions applied to austa, and plot forecasts of the function that computes the best forecasts. Once again, austa has been loaded into your workspace.




Fill in the farima() function to forecast the results of auto.arima(). Follow the structure of the pre-written code in fets() that does the same for ets().
Compute cross-validated errors for ETS models on austa using tsCV() with one-step errors, and save this to e1.
Compute cross-validated errors for ARIMA models on austa using tsCV() with one-step errors, and save this to e2.
Compute the cross-validated MSE for each model class and remove missing values. Refer to the previous chapter if you cannot remember how to calculate MSE.
Produce and plot 10-year forecasts of future values of austa using the best model class.







# Set up forecast functions for ETS and ARIMA models
fets <- function(x, h) {
  forecast(ets(x), h = h)
}

farima <- function(x, h) {
  forecast(auto.arima(x), h = h)
}



# Compute CV errors for ETS on austa as e1
# e1 <- tsCV(austa, fets, h = 10)
# In your first tsCV() call, are you using one-step errors? Set h to 1?

e1 <- tsCV(austa, fets, h = 1)
e1
Time Series:
Start = 1980 
End = 2015 
Frequency = 1 
 [1]  0.02961664  0.04087155 -0.02716076  0.06534484  0.11614266  0.29253514
 [7]  0.32639538  0.42657776 -0.15138198  0.12274782  0.14177783  0.21248634
[13]  0.36092989  0.34011041  0.33600789  0.06946084 -0.24586232 -0.24511203
[19]  0.39138162  0.21877938 -0.44959052 -0.06949302 -0.07711700  0.46541810
[25] -0.03734271 -0.15801604 -0.08008701 -0.12203514 -0.16364892  0.13723188
[31] -0.16104084  0.10426022  0.16719607  0.29836165  0.32879016          NA



# Compute CV errors for ARIMA on austa as e2
e2 <- tsCV(austa, farima, h = 1)
e2
Time Series:
Start = 1980 
End = 2015 
Frequency = 1 
 [1]  0.029616640  0.031986560  0.011342373  0.073851620  0.175292936
 [6]  0.262929560  0.063439520  0.100176040 -0.577969760  0.002453129
[11]  0.021210416  0.089988796  0.230926210  0.192328335  0.174490157
[16]  0.068034920 -0.262749240 -0.405071331  0.144739191  0.249070699
[21] -0.277973836 -0.186209987 -0.243098896  0.257469621  0.052897720
[26] -0.119020189 -0.080774489 -0.205889841 -0.163753633  0.118699044
[31] -0.161168591  0.100240396  0.166994884  0.298511433  0.339202685
[36]           NA





# Find MSE of each model class
mean(e1^2, na.rm = TRUE)
[1] 0.05623684
mean(e2^2, na.rm = TRUE)
[1] 0.04336277


# Plot 10-year forecasts using the best model class
austa %>% farima(h=10) %>% autoplot()






























e1 <- tsCV(austa, fets, h = 10)
e1
Time Series:
Start = 1980 
End = 2015 
Frequency = 1 
             h=1          h=2         h=3         h=4         h=5        h=6
1980  0.02961664  0.046794880  0.03681288  0.10215772  0.21836936  0.4812989
1981  0.04087155  0.030889552  0.09623439  0.21244603  0.47537559  0.8017447
1982 -0.02716076  0.021005508  0.12003858  0.36578957  0.67498008  1.0843466
1983  0.06534484  0.181556480  0.44448604  0.77085512  1.19740024  1.0459756
1984  0.11614266  0.360152763  0.66760238  1.07522804  0.90488394  1.0087274
1985  0.29253514  0.589287576  0.98621606  0.80517478  0.89832110  1.0104700
1986  0.32639538  0.752940502  0.60151586  0.72427882  0.86604438  1.0785165
1987  0.42657776  0.275153124  0.39791608  0.53968164  0.75215380  1.1130624
1988 -0.15138198 -0.028619021  0.11314654  0.32561870  0.68652734  1.0266017
1989  0.12274782  0.264513382  0.47698554  0.83789418  1.17796850  1.5139424
1990  0.14177783  0.354249995  0.71515863  1.05523295  1.39120683  1.7952156
1991  0.21248634  0.573394978  0.91346930  1.24944318  1.65345198  1.7947115
1992  0.36092989  0.701004209  1.03697809  1.44098689  1.58224645  1.4419382
1993  0.34011041  0.676084293  1.08009309  1.22135265  1.08104437  1.3925450
1994  0.33600789  0.740016694  0.88127625  0.74096797  1.05246861  1.4759186
1995  0.06946084 -0.123828055 -0.59868478 -0.62173259 -0.53283104 -0.9585205
1996 -0.24586232 -0.777731108 -0.85779097 -0.82590148 -1.30860298 -1.7127775
1997 -0.24511203 -0.038418791  0.28022381  0.08427541 -0.03314599 -0.2159204
1998  0.39138162  0.917682422  0.92939222  1.01962902  1.04451282  1.5593956
1999  0.21877938 -0.077139086 -0.29453056 -0.57727502 -0.37002049 -0.3566100
2000 -0.44959052 -0.820675641 -1.25711376 -1.20355288 -1.34383600 -1.6539211
2001 -0.06949302 -0.204295080  0.15090186  0.31225479  0.30380573  0.3290247
2002 -0.07711700  0.335769414  0.55481183  0.60405225  0.68696067  0.6417621
2003  0.46541810  0.738058428  0.84089676  0.97740309  0.98580242  1.0289847
2004 -0.03734271 -0.220084240 -0.34704706 -0.58212138 -0.76433005 -0.6533800
2005 -0.15801604 -0.262716793 -0.47775028 -0.64191816 -0.51472809 -0.6502820
2006 -0.08008701 -0.288268653 -0.46166729 -0.35825993 -0.53076357 -0.4470572
2007 -0.12203514 -0.201648857  0.00241337 -0.06325603  0.13284279  0.4038281
2008 -0.16364892 -0.050471984 -0.21320604 -0.11973010  0.04363284  0.3435728
2009  0.13723188 -0.001432189  0.11611374  0.30354666  0.62755659  1.0010375
2010 -0.16104084 -0.065883160  0.09916152  0.40078319  0.75187587         NA
2011  0.10426022  0.278422756  0.58916230  0.94937284          NA         NA
2012  0.16719607  0.470959370  0.82419367          NA          NA         NA
2013  0.29836165  0.645984581          NA          NA          NA         NA
2014  0.32879016           NA          NA          NA          NA         NA
2015          NA           NA          NA          NA          NA         NA
             h=7          h=8         h=9       h=10
1980  0.80766800  1.234213120  1.08278848  1.2055514
1981  1.22828979  1.076865152  1.19962811  1.3413937
1982  0.91574343  1.021327820  1.14591481  1.3412084
1983  1.16873856  1.310504120  1.52297628  1.8838849
1984  1.13157354  1.325126240  1.66711542  1.9882703
1985  1.19332554  1.524617536  1.83507522  2.1414325
1986  1.43942518  1.779499502  2.11547338  2.5194822
1987  1.45313676  1.789110644  2.19311944  2.3343790
1988  1.36257554  1.766584339  1.90784390  1.7675356
1989  1.91795118  2.059210742  1.91890246  2.2304031
1990  1.93647519  1.796166915  2.10766755  2.5311176
1991  1.65440326  1.965903898  2.38935390  2.2982129
1992  1.75343881  2.176888809  2.08574781  2.0731338
1993  1.81599501  1.724854013  1.71224001  1.6342730
1994  1.38477761  1.372163614  1.29419661  1.7062286
1995 -1.30568294 -1.718198392 -1.64071484 -1.7570753
1996 -2.18230499 -2.161833499 -2.33520600 -2.6783805
1997  0.09130421  0.204684809  0.14826341  0.1255100
1998  1.88043442  2.031671224  2.21657602  2.2733738
1999 -0.51300143 -0.635724901 -0.88655537 -1.1026028
2000 -1.93033824 -2.334862355 -2.70460347 -2.7975386
2001  0.22613660  0.158031534  0.36673247  0.2995224
2002  0.63134651  0.897736925  0.88821634  1.1349058
2003  1.34897308  1.393050405  1.69333773  2.0635121
2004 -0.80355248 -0.684141327 -0.48274890 -0.1338422
2005 -0.51771216 -0.304475342  0.05509243  0.4729568
2006 -0.29346385 -0.003293491  0.33634787         NA
2007  0.81588741  1.281462606          NA         NA
2008  0.69298372           NA          NA         NA
2009          NA           NA          NA         NA
2010          NA           NA          NA         NA
2011          NA           NA          NA         NA
2012          NA           NA          NA         NA
2013          NA           NA          NA         NA
2014          NA           NA          NA         NA
2015          NA           NA          NA         NA










e2 <- tsCV(austa, farima, h = 10)
e2
Time Series:
Start = 1980 
End = 2015 
Frequency = 1 
              h=1          h=2         h=3         h=4         h=5         h=6
1980  0.029616640  0.046794880  0.03681288  0.10215772  0.21836936  0.48129892
1981  0.031986560  0.022004560  0.08734940  0.20356104  0.46649060  0.79285968
1982  0.011342373  0.076687213  0.19289885  0.45582841  0.78219749  1.20874261
1983  0.073851620  0.190063260  0.45299282  0.77936190  1.20590702  1.05448238
1984  0.175292936  0.438222496  0.76459158  1.19113670  1.03971206  1.16247502
1985  0.262929560  0.589298640  1.01584376  0.86441912  0.98718208  1.12894764
1986  0.063439520  0.227055080 -0.18729912 -0.32746572 -0.44862972 -0.49908712
1987  0.100176040 -0.377617680 -0.58122380 -0.76582732 -0.87972424 -0.84518468
1988 -0.577969760 -0.881751920 -1.16653148 -1.38060444 -1.44624092 -1.53271172
1989  0.002453129  0.023908858  0.11607119  0.35667000  0.57643448  0.79209853
1990  0.021210416  0.113127432  0.35348093  0.57300010  0.78841884  1.07187250
1991  0.089988796  0.328414073  0.54600503  0.75949555  1.04102098  1.05979718
1992  0.230926210  0.441018100  0.64700955  0.92103592  0.93231305  0.66202234
1993  0.192328335  0.380556231  0.63681905  0.63033262  0.34227836  0.50603301
1994  0.174490157  0.417015234  0.39679107  0.09499907  0.24501599  0.50698226
1995  0.068034920 -0.126679400 -0.60296156 -0.62743480 -0.53995868 -0.96707356
1996 -0.262749240 -0.807066320 -0.89957448 -0.88013328 -1.37528308 -1.79190588
1997 -0.405071331 -0.358333743 -0.19964679 -0.55555085 -0.83292790 -1.17565795
1998  0.144739191  0.401427742  0.14352529 -0.03585016 -0.28057860 -0.03530805
1999  0.249070699 -0.016449602 -0.20344290 -0.45578920 -0.21813651 -0.17432781
2000 -0.277973836 -0.477420672 -0.74222051 -0.51702134 -0.48566618 -0.62411302
2001 -0.186209987 -0.437772973 -0.19933696 -0.15474495 -0.27995493 -0.37149692
2002 -0.243098896  0.003801207  0.05685731 -0.05988859 -0.14296648 -0.35415138
2003  0.257469621  0.321095242  0.21491886  0.14241048 -0.05820490 -0.22403727
2004  0.052897720 -0.064006560 -0.14724284 -0.35858612 -0.53514640 -0.43490068
2005 -0.119020189 -0.204372378 -0.41783157 -0.59650776 -0.49837794 -0.67615913
2006 -0.080774489 -0.289655978 -0.46375447 -0.36104696 -0.53425045 -0.45124394
2007 -0.205889841 -0.376996683 -0.27129752 -0.44150937 -0.35551121 -0.19962605
2008 -0.163753633 -0.050701266 -0.21355990 -0.12020853  0.04302984  0.34284520
2009  0.118699044 -0.038512912  0.06048513  0.22937018  0.53483222  0.88976526
2010 -0.161168591 -0.066127181  0.09880123  0.40030664  0.75128305          NA
2011  0.100240396  0.270367792  0.57707219  0.93324758          NA          NA
2012  0.166994884  0.470566768  0.82360965          NA          NA          NA
2013  0.298511433  0.646493865          NA          NA          NA          NA
2014  0.339202685           NA          NA          NA          NA          NA
2015           NA           NA          NA          NA          NA          NA
             h=7          h=8        h=9        h=10
1980  0.80766800  1.234213120  1.0827885  1.20555144
1981  1.21940480  1.067980160  1.1907431  1.33250868
1982  1.05731797  1.180080933  1.3218465  1.53431865
1983  1.17724534  1.319010900  1.5314831  1.89239170
1984  1.30424058  1.516712736  1.8776214  2.21769570
1985  1.34141980  1.702328440  2.0424028  2.37837664
1986 -0.40110804 -0.323963280 -0.2509190 -0.10983972
1987 -0.83147944 -0.821874640 -0.7442349 -0.92934444
1988 -1.62328296 -1.645819280 -1.9311048 -2.49795824
1989  1.07579750  1.096747231  0.8361291  1.02731993
1990  1.09257691  0.831713488  1.0226590  1.32555384
1991  0.79700553  0.986022811  1.2869894  1.07336508
1992  0.84354055  1.137008120  0.9158847  0.77328826
1993  0.78173703  0.542850043  0.3824901  0.15677707
1994  0.25435754  0.080259817 -0.1591909  0.09135737
1995 -1.31566144 -1.729602320 -1.6535442 -1.77133008
1996 -2.27388168 -2.265858480 -2.4516793 -2.80730208
1997 -1.02838900 -1.074964051 -1.2913411 -1.47405015
1998  0.01611850 -0.102256951 -0.1869644 -0.39977885
1999 -0.30032111 -0.392646408 -0.6130787 -0.79872801
2000 -0.72889185 -0.961777688 -1.1598805 -1.08117736
2001 -0.59114591 -0.776011893 -0.6840719 -0.86804287
2002 -0.53055327 -0.430149171 -0.6056561 -0.52495296
2003 -0.11306365 -0.278001033 -0.1867284 -0.02556879
2004 -0.61056596 -0.530021240 -0.3795895 -0.09258080
2005 -0.59773032 -0.449414510 -0.1645217  0.16984211
2006 -0.29835042 -0.008879914  0.3300616          NA
2007  0.09283611  0.434769268         NA          NA
2008  0.69213157           NA         NA          NA
2009          NA           NA         NA          NA
2010          NA           NA         NA          NA
2011          NA           NA         NA          NA
2012          NA           NA         NA          NA
2013          NA           NA         NA          NA
2014          NA           NA         NA          NA
2015          NA           NA         NA          NA






Now you know how to compare across model classes.

